<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جدارات - المنصة الوطنية الموحدة للتوظيف</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=Tajawal:wght@400;500;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-900: #0a4943; --primary-800: #0d5b54; --primary-700: #0f6d65;
            --primary-600: #11867c; --primary-500: #14b8a6; --primary-400: #2dd4bf;
            --primary-300: #5eead4; --accent-600: #c26510; --accent-500: #e07818;
            --accent-400: #f59e0b; --neutral-900: #0f1419; --neutral-800: #1a1f25;
            --neutral-700: #2d3339; --neutral-600: #4a5159; --neutral-500: #6b7280;
            --neutral-400: #9ca3af; --neutral-300: #d1d5db; --neutral-200: #e5e7eb;
            --neutral-100: #f3f4f6; --neutral-50: #f9fafb;
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --radius-sm: 8px; --radius-md: 12px; --radius-lg: 16px; --radius-xl: 20px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { background: var(--neutral-50); }
        body { font-family: 'IBM Plex Sans Arabic', 'Tajawal', sans-serif; background: var(--neutral-50); color: var(--neutral-900); line-height: 1.6; min-height: 100vh; position: relative; }
        body.en { font-family: 'Inter', sans-serif; direction: ltr; }
        .pattern-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; z-index: 0; opacity: 0.035; background: linear-gradient(135deg, rgba(17,134,124,0.02) 0%, rgba(20,184,166,0.03) 100%), url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%2311867c' stroke-width='1.5' opacity='0.4'%3E%3Cpath d='M40 10L70 40L40 70L10 40Z'/%3E%3Cpath d='M40 20L60 40L40 60L20 40Z'/%3E%3C/g%3E%3C/svg%3E"); background-size: 80px 80px; animation: patternShift 60s linear infinite; }
        @keyframes patternShift { 0% { background-position: 0 0; } 100% { background-position: 80px 80px; } }

        /* Header */
        .header { background: rgba(255,255,255,0.97); border-bottom: 1px solid var(--neutral-200); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(12px) saturate(180%); box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.3s ease; }
        .header-content { max-width: 1400px; margin: 0 auto; padding: 0 24px; height: 72px; display: flex; align-items: center; justify-content: space-between; gap: 24px; }
        .logo { display: flex; align-items: center; gap: 8px; text-decoration: none; color: var(--primary-700); }
        .logo-svg { height: 48px; width: auto; }
        .logo-svg .st0 { fill: #CFB485; }
        .logo-svg .st1 { fill: #016664; }
        .nav { display: flex; align-items: center; gap: 4px; }
        .nav-link { padding: 10px 16px; text-decoration: none; color: var(--neutral-600); font-weight: 500; font-size: 0.95rem; border-radius: var(--radius-md); transition: all 0.2s; cursor: pointer; }
        .nav-link:hover { color: var(--primary-700); background: rgba(20,184,166,0.08); }
        .nav-link.active { color: var(--primary-700); background: rgba(20,184,166,0.12); }
        .header-actions { display: flex; align-items: center; gap: 12px; }
        .lang-toggle { display: flex; background: var(--neutral-100); border-radius: var(--radius-md); padding: 4px; }
        .lang-btn { padding: 6px 12px; border: none; background: transparent; font-size: 0.85rem; font-weight: 500; color: var(--neutral-500); cursor: pointer; border-radius: 6px; transition: all 0.2s; font-family: inherit; }
        .lang-btn.active { background: white; color: var(--primary-700); box-shadow: var(--shadow-sm); }
        .btn { padding: 10px 20px; border-radius: var(--radius-md); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; border: none; font-family: inherit; }
        .btn-ghost { background: transparent; color: var(--neutral-700); }
        .btn-ghost:hover { background: var(--neutral-100); }
        .btn-primary { background: linear-gradient(135deg, #11867c 0%, #0f6d65 100%); color: white; box-shadow: 0 4px 12px rgba(17,134,124,0.25); position: relative; overflow: hidden; }
        .btn-primary::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 100%); opacity: 0; transition: opacity 0.3s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(17,134,124,0.35); }
        .btn-primary:hover::before { opacity: 1; }
        .btn-primary:active { transform: translateY(0); box-shadow: 0 2px 8px rgba(17,134,124,0.25); }
        .mobile-menu-btn { display: none; padding: 8px; background: none; border: none; cursor: pointer; }
        .mobile-menu-btn svg { width: 24px; height: 24px; stroke: var(--neutral-700); }

        /* Hero */
        .hero { background: linear-gradient(135deg, #0a4943 0%, #0f6d65 50%, #14b8a6 100%); padding: 60px 24px; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; inset: 0; background: radial-gradient(circle at 30% 50%, rgba(45,212,191,0.15), transparent 50%), radial-gradient(circle at 70% 50%, rgba(17,134,124,0.15), transparent 50%), url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='white' stroke-width='0.8' opacity='0.08'%3E%3Cpath d='M60 15L105 60L60 105L15 60Z'/%3E%3Cpath d='M60 30L90 60L60 90L30 60Z'/%3E%3C/g%3E%3C/svg%3E"); background-size: 120px 120px; animation: heroPattern 40s linear infinite; }
        @keyframes heroPattern { 0% { transform: translateX(0) translateY(0); } 100% { transform: translateX(120px) translateY(120px); } }
        .hero-content { max-width: 900px; margin: 0 auto; position: relative; z-index: 1; }
        .hero-title { font-family: 'Tajawal', sans-serif; font-size: 2.25rem; font-weight: 700; color: white; text-align: center; margin-bottom: 8px; }
        body.en .hero-title { font-family: 'Inter', sans-serif; }
        .hero-subtitle { color: rgba(255,255,255,0.8); text-align: center; margin-bottom: 32px; font-size: 1.1rem; }
        .search-box { background: white; border-radius: var(--radius-xl); padding: 10px; display: flex; gap: 10px; box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(17,134,124,0.1); flex-wrap: wrap; transform: translateY(0); transition: all 0.3s ease; }
        .search-box:focus-within { box-shadow: 0 24px 48px rgba(0,0,0,0.2), 0 0 0 2px rgba(17,134,124,0.2); transform: translateY(-2px); }
        .search-field { flex: 1; min-width: 200px; position: relative; }
        .search-field input, .search-field select { width: 100%; padding: 16px 20px; padding-right: 48px; border: 2px solid transparent; border-radius: var(--radius-lg); font-size: 1rem; font-family: inherit; background: var(--neutral-50); transition: all 0.2s; appearance: none; }
        body.en .search-field input, body.en .search-field select { padding-right: 20px; padding-left: 48px; }
        .search-field input:focus, .search-field select:focus { outline: none; border-color: var(--primary-400); background: white; }
        .search-field-icon { position: absolute; right: 18px; top: 50%; transform: translateY(-50%); color: var(--neutral-400); pointer-events: none; }
        body.en .search-field-icon { right: auto; left: 18px; }
        .search-btn { padding: 16px 40px; background: linear-gradient(135deg, #11867c 0%, #0f6d65 100%); color: white; border: none; border-radius: var(--radius-lg); font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-family: inherit; display: flex; align-items: center; gap: 10px; box-shadow: 0 4px 12px rgba(17,134,124,0.25); position: relative; overflow: hidden; }
        .search-btn::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 100%); opacity: 0; transition: opacity 0.3s ease; }
        .search-btn:hover { background: linear-gradient(135deg, #0f6d65 0%, #0a4943 100%); box-shadow: 0 6px 20px rgba(17,134,124,0.35); transform: translateY(-1px); }
        .search-btn:hover::before { opacity: 1; }
        .search-btn:active { transform: translateY(0); box-shadow: 0 2px 8px rgba(17,134,124,0.25); }
        .stats-bar { display: flex; justify-content: center; gap: 48px; margin-top: 32px; flex-wrap: wrap; }
        .stat-item { text-align: center; color: white; }
        .stat-value { font-family: 'Tajawal', sans-serif; font-size: 1.75rem; font-weight: 700; }
        body.en .stat-value { font-family: 'Inter', sans-serif; }
        .stat-label { font-size: 0.9rem; opacity: 0.8; }

        /* Main Layout */
        .main-content { max-width: 1400px; margin: 0 auto; padding: 32px 24px; display: grid; grid-template-columns: 300px 1fr; gap: 32px; position: relative; z-index: 1; }

        /* Filters */
        .filter-backdrop { display: none; }
        .filters-floating-close { display: none; }
        .filters-sidebar { background: white; border-radius: var(--radius-xl); padding: 26px; height: fit-content; position: sticky; top: 104px; box-shadow: 0 4px 12px rgba(0,0,0,0.06), 0 0 0 1px rgba(17,134,124,0.06); border: none; transition: all 0.3s ease; }
        .filters-sidebar:hover { box-shadow: 0 6px 16px rgba(0,0,0,0.08), 0 0 0 1px rgba(17,134,124,0.1); }
        .filters-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--neutral-200); background: white; }
        .filters-title { font-weight: 700; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }
        .clear-filters { color: var(--primary-600); font-size: 0.85rem; cursor: pointer; font-weight: 500; background: none; border: none; font-family: inherit; }
        .filters-header-actions { display: flex; align-items: center; gap: 12px; }
        .filters-close-mobile { display: none; width: 36px; height: 36px; border-radius: 50%; border: none; background: var(--neutral-100); cursor: pointer; align-items: center; justify-content: center; }
        .filters-close-mobile svg { width: 20px; height: 20px; }
        .show-results-btn { display: none; width: 100%; padding: 16px; background: var(--primary-600); color: white; border: none; border-radius: var(--radius-md); font-size: 1rem; font-weight: 600; cursor: pointer; font-family: inherit; margin-top: 16px; }
        .show-results-btn:active { background: var(--primary-700); }
        .filter-group { margin-bottom: 24px; }
        .filter-label { font-weight: 600; font-size: 0.9rem; color: var(--neutral-700); margin-bottom: 12px; display: block; }
        .filter-options { display: flex; flex-direction: column; gap: 6px; }
        .filter-option { display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 12px 14px; min-height: 44px; border-radius: var(--radius-sm); transition: background 0.2s; user-select: none; }
        .filter-option:hover { background: var(--neutral-50); }
        .filter-checkbox { width: 20px; height: 20px; border: 2px solid var(--neutral-300); border-radius: 5px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; flex-shrink: 0; }
        .filter-option.selected .filter-checkbox { background: var(--primary-600); border-color: var(--primary-600); }
        .filter-checkbox svg { width: 12px; height: 12px; fill: white; opacity: 0; transform: scale(0.5); transition: all 0.2s; }
        .filter-option.selected .filter-checkbox svg { opacity: 1; transform: scale(1); }
        .filter-text { font-size: 0.9rem; color: var(--neutral-700); flex: 1; }
        .filter-count { font-size: 0.8rem; color: var(--neutral-400); background: var(--neutral-100); padding: 2px 10px; border-radius: 10px; }
        .filter-tags { display: flex; flex-wrap: wrap; gap: 8px; }
        .filter-tag { padding: 8px 16px; background: var(--neutral-100); border-radius: 20px; font-size: 0.85rem; color: var(--neutral-600); cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
        .filter-tag:hover { border-color: var(--primary-300); color: var(--primary-700); }
        .filter-tag.selected { background: rgba(20,184,166,0.12); color: var(--primary-700); border-color: var(--primary-400); }

        /* Improved Sector Filter - Better than nested menus! */
        .sector-filter-group { display: flex; flex-direction: column; gap: 12px; }
        .sector-card { border: 2px solid var(--neutral-200); border-radius: var(--radius-md); overflow: hidden; transition: all 0.2s; }
        .sector-card:hover { border-color: var(--neutral-300); }
        .sector-card.selected { border-color: var(--primary-400); background: rgba(20,184,166,0.02); }
        .sector-header { display: flex; align-items: center; gap: 12px; padding: 12px; cursor: pointer; }
        .sector-icon { width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .sector-icon.govt { background: linear-gradient(135deg, rgba(13,148,136,0.15), rgba(13,148,136,0.25)); color: var(--primary-700); }
        .sector-icon.semi-govt { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.25)); color: #7c3aed; }
        .sector-icon.private { background: linear-gradient(135deg, rgba(217,119,6,0.15), rgba(217,119,6,0.25)); color: var(--accent-600); }
        .sector-icon svg { width: 20px; height: 20px; }
        .sector-info { flex: 1; }
        .sector-name { font-weight: 600; font-size: 0.95rem; color: var(--neutral-800); }
        .sector-count { font-size: 0.8rem; color: var(--neutral-500); }
        .sector-checkbox { width: 22px; height: 22px; border: 2px solid var(--neutral-300); border-radius: 6px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .sector-card.selected .sector-checkbox { background: var(--primary-600); border-color: var(--primary-600); }
        .sector-checkbox svg { width: 14px; height: 14px; stroke: white; opacity: 0; transition: all 0.2s; }
        .sector-card.selected .sector-checkbox svg { opacity: 1; }
        .sector-subtypes { display: none; padding: 0 12px 12px; gap: 8px; flex-wrap: wrap; }
        .sector-card.selected .sector-subtypes { display: flex; }
        .subtype-chip { padding: 6px 12px; background: var(--neutral-100); border-radius: 16px; font-size: 0.8rem; color: var(--neutral-600); cursor: pointer; transition: all 0.2s; border: 1px solid transparent; }
        .subtype-chip:hover { background: var(--neutral-200); }
        .subtype-chip.selected { background: var(--primary-600); color: white; border-color: var(--primary-600); }
        .salary-slider { padding: 12px 0; }
        .salary-inputs { display: flex; gap: 12px; margin-bottom: 16px; }
        .salary-input-group { flex: 1; }
        .salary-input-label { font-size: 0.75rem; color: var(--neutral-500); margin-bottom: 4px; display: block; }
        .salary-input { width: 100%; padding: 10px 12px; border: 1px solid var(--neutral-200); border-radius: var(--radius-sm); font-size: 0.9rem; font-family: inherit; text-align: center; }
        .range-slider { position: relative; height: 6px; background: var(--neutral-200); border-radius: 3px; margin: 20px 0; }
        .range-slider-fill { position: absolute; height: 100%; background: linear-gradient(90deg, var(--primary-500), var(--primary-600)); border-radius: 3px; }
        .range-slider input[type="range"] { position: absolute; width: 100%; height: 6px; background: transparent; pointer-events: none; appearance: none; top: 0; }
        .range-slider input[type="range"]::-webkit-slider-thumb { appearance: none; width: 22px; height: 22px; background: white; border: 3px solid var(--primary-600); border-radius: 50%; cursor: pointer; pointer-events: auto; box-shadow: var(--shadow-md); }

        /* Jobs */
        .jobs-section { min-width: 0; }
        .jobs-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; flex-wrap: wrap; gap: 16px; }
        .jobs-count { font-size: 1rem; color: var(--neutral-600); }
        .jobs-count strong { color: var(--neutral-900); font-weight: 700; }
        .jobs-controls { display: flex; align-items: center; gap: 12px; }
        .sort-select { padding: 10px 16px; padding-left: 36px; border: 1px solid var(--neutral-200); border-radius: var(--radius-md); font-size: 0.9rem; font-family: inherit; background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23737373' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E") no-repeat 12px center; cursor: pointer; appearance: none; }
        body.en .sort-select { padding-left: 16px; padding-right: 36px; background-position: calc(100% - 12px) center; }
        .view-toggles { display: flex; background: var(--neutral-100); border-radius: var(--radius-md); padding: 4px; }
        .view-btn { padding: 10px 14px; min-width: 44px; min-height: 44px; border: none; background: transparent; cursor: pointer; border-radius: 6px; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
        .view-btn svg { width: 20px; height: 20px; stroke: var(--neutral-500); }
        .view-btn.active { background: white; box-shadow: var(--shadow-sm); }
        .view-btn.active svg { stroke: var(--primary-700); }
        .view-btn:hover:not(.active) { background: rgba(255,255,255,0.5); }
        .active-filters { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .active-filter-tag { display: flex; align-items: center; gap: 6px; padding: 6px 12px; background: rgba(20,184,166,0.1); color: var(--primary-700); border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .active-filter-tag button { background: none; border: none; cursor: pointer; padding: 0; display: flex; color: var(--primary-600); }
        .jobs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .jobs-grid.list-view { grid-template-columns: 1fr; }
        .jobs-grid.list-view .job-card { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 20px; padding: 20px 24px; }
        .jobs-grid.list-view .job-card-header { margin-bottom: 0; }
        .jobs-grid.list-view .job-meta { margin-bottom: 0; }
        .jobs-grid.list-view .job-tags { display: none; }
        .jobs-grid.list-view .job-card-footer { border-top: none; padding-top: 0; }
        .jobs-grid.list-view .job-card-stages { display: none; }
        .jobs-grid.list-view .job-card-applicants { display: none; }

        /* Job Card */
        .job-card { background: white; border-radius: var(--radius-xl); padding: 26px; border: 1px solid rgba(17,134,124,0.08); box-shadow: 0 2px 8px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06); transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; cursor: pointer; animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards; opacity: 0; }
        .job-card::before { content: ''; position: absolute; top: 0; right: 0; width: 5px; height: 100%; background: linear-gradient(180deg, #14b8a6 0%, #0f6d65 100%); opacity: 0; transition: opacity 0.35s ease; }
        body.en .job-card::before { right: auto; left: 0; }
        .job-card::after { content: ''; position: absolute; inset: 0; background: radial-gradient(circle at top right, rgba(20,184,166,0.03), transparent 60%); opacity: 0; transition: opacity 0.35s ease; pointer-events: none; }
        .job-card:hover { border-color: rgba(20,184,166,0.25); box-shadow: 0 12px 32px rgba(17,134,124,0.12), 0 4px 12px rgba(0,0,0,0.08); transform: translateY(-4px); }
        .job-card:hover::before { opacity: 1; }
        .job-card:hover::after { opacity: 1; }
        .job-card-header { display: flex; gap: 16px; margin-bottom: 16px; }
        .company-logo { width: 56px; height: 56px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 700; font-size: 0.7rem; text-align: center; line-height: 1.2; padding: 4px; }
        .company-logo.govt { background: linear-gradient(135deg, rgba(13,148,136,0.1), rgba(13,148,136,0.2)); color: var(--primary-700); }
        .company-logo.semi-govt { background: linear-gradient(135deg, rgba(139,92,246,0.1), rgba(139,92,246,0.2)); color: #7c3aed; }
        .company-logo.private { background: linear-gradient(135deg, rgba(217,119,6,0.1), rgba(217,119,6,0.2)); color: var(--accent-600); }
        .job-card-info { flex: 1; min-width: 0; }
        .job-title { font-weight: 700; font-size: 1.1rem; color: var(--neutral-900); margin-bottom: 4px; line-height: 1.4; }
        .company-name { color: var(--neutral-500); font-size: 0.9rem; }
        .job-card-bookmark { position: absolute; top: 16px; left: 16px; width: 44px; height: 44px; border: none; background: var(--neutral-50); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; z-index: 2; }
        body.en .job-card-bookmark { left: auto; right: 16px; }
        .job-card-bookmark svg { width: 20px; height: 20px; stroke: var(--neutral-400); fill: none; transition: all 0.2s; }
        .job-card-bookmark:hover { background: rgba(20,184,166,0.15); }
        .job-card-bookmark:hover svg { stroke: var(--primary-600); }
        .job-card-bookmark.saved { background: rgba(239,68,68,0.1); }
        .job-card-bookmark.saved svg { fill: #ef4444; stroke: #ef4444; }
        .job-card-bookmark.saved:hover { background: rgba(239,68,68,0.2); }
        .job-meta { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px; }
        .job-meta-item { display: flex; align-items: center; gap: 6px; font-size: 0.85rem; color: var(--neutral-500); }
        .job-meta-item svg { width: 16px; height: 16px; stroke: var(--neutral-400); }
        .job-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .job-tag { padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 500; }
        .job-tag.type-fulltime { background: rgba(16,185,129,0.1); color: #059669; }
        .job-tag.type-parttime { background: rgba(139,92,246,0.1); color: #7c3aed; }
        .job-tag.type-remote { background: rgba(59,130,246,0.1); color: #2563eb; }
        .job-tag.type-contract { background: rgba(236,72,153,0.1); color: #db2777; }
        .job-tag.sector-govt { background: rgba(13,148,136,0.1); color: var(--primary-700); }
        .job-tag.sector-semi-govt { background: rgba(139,92,246,0.1); color: #7c3aed; }
        .job-tag.sector-private { background: rgba(217,119,6,0.1); color: var(--accent-600); }
        .job-card-footer { display: flex; align-items: center; justify-content: space-between; padding-top: 16px; border-top: 1px solid var(--neutral-100); }
        .job-salary { font-weight: 700; color: var(--primary-700); font-size: 1rem; display: flex; align-items: center; gap: 4px; flex-wrap: wrap; }
        .job-salary span { font-weight: 400; color: var(--neutral-400); font-size: 0.85rem; }
        .sar-symbol { display: inline-block; width: 16px; height: 16px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1124.14 1256.39'%3E%3Cpath fill='%230d9488' d='M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z'/%3E%3Cpath fill='%230d9488' d='M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z'/%3E%3C/svg%3E"); background-size: contain; background-repeat: no-repeat; vertical-align: middle; }
        .job-date { font-size: 0.85rem; color: var(--neutral-400); }
        .apply-btn { padding: 12px 26px; background: linear-gradient(135deg, #11867c 0%, #0f6d65 100%); color: white; border: none; border-radius: var(--radius-md); font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-family: inherit; box-shadow: 0 3px 10px rgba(17,134,124,0.25); position: relative; overflow: hidden; }
        .apply-btn::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 100%); opacity: 0; transition: opacity 0.3s ease; }
        .apply-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(17,134,124,0.35); }
        .apply-btn:hover::before { opacity: 1; }
        .apply-btn:active { transform: translateY(0); box-shadow: 0 2px 6px rgba(17,134,124,0.25); }

        /* Pagination */
        .pagination { display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 40px; }
        .pagination-btn { width: 40px; height: 40px; border: 1px solid var(--neutral-200); background: white; border-radius: var(--radius-md); cursor: pointer; display: flex; align-items: center; justify-content: center; font-family: inherit; font-weight: 500; color: var(--neutral-600); transition: all 0.2s; }
        .pagination-btn:hover { border-color: var(--primary-400); color: var(--primary-700); }
        .pagination-btn.active { background: var(--primary-600); border-color: var(--primary-600); color: white; }
        .pagination-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .pagination-btn svg { width: 18px; height: 18px; stroke: currentColor; }

        /* Modal - Redesigned */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 1000; display: none; align-items: flex-start; justify-content: center; padding: 20px; overflow-y: auto; }
        .modal-overlay.open { display: flex; animation: overlayFadeIn 0.3s ease; }
        @keyframes overlayFadeIn { from { opacity: 0; } to { opacity: 1; } }
        @supports (backdrop-filter: blur(8px)) {
            .modal-overlay { background: rgba(0,0,0,0.65); backdrop-filter: blur(8px) saturate(120%); }
        }
        .modal { background: var(--neutral-50); border-radius: var(--radius-xl); max-width: 1000px; width: 100%; margin: 20px auto; position: relative; animation: modalIn 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; box-shadow: 0 30px 60px rgba(0,0,0,0.25), 0 0 0 1px rgba(17,134,124,0.1); }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.92) translateY(40px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        /* Modal Header */
        .modal-header { background: linear-gradient(135deg, #0f6d65 0%, #0a4943 100%); padding: 32px 36px; border-radius: var(--radius-xl) var(--radius-xl) 0 0; position: relative; overflow: hidden; }
        .modal-header::before { content: ''; position: absolute; inset: 0; background: radial-gradient(circle at top right, rgba(45,212,191,0.15), transparent 50%); pointer-events: none; }
        .modal-header::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); }
        .modal-close { position: absolute; top: 20px; left: 20px; width: 40px; height: 40px; border: none; background: rgba(255,255,255,0.15); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .modal-close:hover { background: rgba(255,255,255,0.25); }
        body.en .modal-close { left: auto; right: 20px; }
        .modal-close svg { width: 20px; height: 20px; stroke: white; }
        .modal-header-content { display: flex; gap: 20px; align-items: flex-start; }
        .modal-company-logo { width: 72px; height: 72px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.8rem; text-align: center; background: white !important; flex-shrink: 0; color: var(--neutral-700) !important; }
        .modal-company-logo img { width: 100%; height: 100%; object-fit: contain; padding: 8px; }
        .modal-header-info { flex: 1; color: white; }
        .modal-job-id { font-size: 0.8rem; opacity: 0.7; margin-bottom: 4px; }
        .modal-job-title { font-size: 1.6rem; font-weight: 700; margin-bottom: 6px; line-height: 1.3; }
        .modal-company-name { opacity: 0.9; font-size: 1rem; margin-bottom: 8px; }
        .modal-deadline { display: inline-flex; align-items: center; gap: 6px; font-size: 0.85rem; background: rgba(255,255,255,0.15); padding: 6px 14px; border-radius: 20px; }
        .modal-deadline svg { width: 14px; height: 14px; }

        /* Modal Body */
        .modal-body { padding: 0; display: grid; grid-template-columns: 280px 1fr; }

        /* Sidebar */
        .modal-sidebar { background: white; padding: 24px; border-left: 1px solid var(--neutral-200); }
        body.en .modal-sidebar { border-left: none; border-right: 1px solid var(--neutral-200); }
        .sidebar-item { display: flex; align-items: flex-start; gap: 12px; padding: 14px 0; border-bottom: 1px solid var(--neutral-100); }
        .sidebar-item:last-child { border-bottom: none; }
        .sidebar-icon { width: 36px; height: 36px; border-radius: 8px; background: var(--neutral-50); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .sidebar-icon svg { width: 18px; height: 18px; stroke: var(--primary-600); }
        .sidebar-label { font-size: 0.75rem; color: var(--neutral-500); margin-bottom: 2px; }
        .sidebar-value { font-size: 0.9rem; font-weight: 600; color: var(--neutral-800); }

        /* Main Content */
        .modal-main { padding: 28px 32px; }
        .modal-section { margin-bottom: 28px; }
        .modal-section-title { font-weight: 700; font-size: 1rem; margin-bottom: 14px; color: var(--primary-700); display: flex; align-items: center; gap: 10px; padding-bottom: 10px; border-bottom: 2px solid var(--primary-100); }
        .modal-section-title svg { width: 20px; height: 20px; stroke: var(--primary-600); }
        .modal-section p { color: var(--neutral-600); line-height: 1.9; font-size: 0.95rem; }
        .modal-section ul { padding-right: 20px; margin: 0; }
        body.en .modal-section ul { padding-right: 0; padding-left: 20px; }
        .modal-section li { color: var(--neutral-600); line-height: 1.9; margin-bottom: 8px; font-size: 0.95rem; }

        /* Info Grid */
        .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .info-card { background: white; border-radius: var(--radius-md); padding: 16px; border: 1px solid var(--neutral-200); }
        .info-card-title { font-size: 0.8rem; color: var(--neutral-500); margin-bottom: 8px; font-weight: 500; }
        .info-card-content { font-size: 0.9rem; color: var(--neutral-700); }

        /* Benefits/Features */
        .benefits-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .benefit-tag { display: inline-flex; align-items: center; gap: 6px; padding: 8px 14px; background: rgba(16,185,129,0.1); color: #059669; border-radius: 20px; font-size: 0.85rem; font-weight: 500; }
        .benefit-tag svg { width: 16px; height: 16px; }

        /* Skills/Tags */
        .skills-grid { display: flex; flex-wrap: wrap; gap: 8px; }
        .skill-tag { padding: 8px 14px; background: var(--neutral-100); border-radius: var(--radius-sm); font-size: 0.85rem; color: var(--neutral-700); }
        .skill-tag .level { color: var(--primary-600); font-weight: 500; margin-right: 6px; }
        body.en .skill-tag .level { margin-right: 0; margin-left: 6px; }

        /* Qualifications */
        .qual-list { display: flex; flex-direction: column; gap: 8px; }
        .qual-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 14px; background: white; border-radius: var(--radius-sm); border: 1px solid var(--neutral-200); font-size: 0.9rem; color: var(--neutral-700); }
        .qual-item svg { width: 18px; height: 18px; stroke: var(--primary-500); flex-shrink: 0; margin-top: 2px; }

        /* Languages */
        .lang-grid { display: flex; gap: 12px; flex-wrap: wrap; }
        .lang-item { display: flex; align-items: center; gap: 10px; padding: 12px 18px; background: white; border-radius: var(--radius-md); border: 1px solid var(--neutral-200); }
        .lang-flag { font-size: 1.2rem; }
        .lang-name { font-weight: 600; font-size: 0.9rem; color: var(--neutral-800); }
        .lang-level { font-size: 0.8rem; color: var(--primary-600); }

        /* Modal Footer */
        .modal-footer { padding: 20px 32px; background: white; border-top: 1px solid var(--neutral-200); display: flex; gap: 12px; flex-wrap: wrap; border-radius: 0 0 var(--radius-xl) var(--radius-xl); }
        .modal-footer .apply-btn { flex: 1; justify-content: center; padding: 16px 28px; font-size: 1.05rem; min-width: 200px; }

        @media (max-width: 768px) {
            .modal-body { grid-template-columns: 1fr; }
            .modal-sidebar { border-left: none; border-top: 1px solid var(--neutral-200); order: -1; display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; padding: 16px; }
            .sidebar-item { padding: 12px; border-bottom: none; background: var(--neutral-50); border-radius: var(--radius-sm); flex-direction: column; align-items: center; text-align: center; gap: 8px; }
            .sidebar-item .sidebar-icon { margin-bottom: 0; }
            .sidebar-item-content { text-align: center; }
            .modal-main { padding: 20px; }
            .info-grid { grid-template-columns: 1fr; }
            .modal-header-content { flex-direction: column; text-align: center; align-items: center; }
        }

        /* Pages */
        .page { display: none; }
        .page.active { display: block; }
        .page-header { background: linear-gradient(135deg, var(--primary-800), var(--primary-600)); padding: 60px 24px; text-align: center; color: white; }
        .page-title { font-size: 2rem; font-weight: 700; margin-bottom: 12px; }
        .page-subtitle { opacity: 0.8; font-size: 1.1rem; }
        .page-content { max-width: 1200px; margin: 0 auto; padding: 40px 24px; }
        .companies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; }
        .company-card { background: white; border-radius: var(--radius-xl); padding: 24px; border: 1px solid var(--neutral-100); text-align: center; transition: all 0.3s; }
        .company-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px); }
        .company-card-logo { width: 80px; height: 80px; margin: 0 auto 16px; border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1rem; }
        .company-card-name { font-weight: 700; font-size: 1.1rem; margin-bottom: 4px; }
        .company-card-sector { color: var(--neutral-500); font-size: 0.9rem; margin-bottom: 12px; }
        .company-card-jobs { color: var(--primary-600); font-weight: 600; }
        .applications-list { display: flex; flex-direction: column; gap: 16px; }
        .application-card { background: white; border-radius: var(--radius-xl); padding: 24px; border: 1px solid var(--neutral-100); display: flex; align-items: center; gap: 20px; }
        .application-status { padding: 6px 16px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
        .application-status.pending { background: rgba(251,191,36,0.1); color: #d97706; }
        .application-status.reviewing { background: rgba(59,130,246,0.1); color: #2563eb; }
        .application-status.accepted { background: rgba(16,185,129,0.1); color: #059669; }
        .profile-card { background: white; border-radius: var(--radius-xl); padding: 40px; border: 1px solid var(--neutral-100); max-width: 600px; margin: 0 auto; text-align: center; }
        .profile-avatar { width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; font-weight: 700; }
        .profile-name { font-size: 1.5rem; font-weight: 700; margin-bottom: 8px; }
        .profile-email { color: var(--neutral-500); margin-bottom: 24px; }
        .profile-stats { display: flex; justify-content: center; gap: 40px; padding: 24px 0; border-top: 1px solid var(--neutral-200); border-bottom: 1px solid var(--neutral-200); margin-bottom: 24px; }
        .profile-stat-value { font-size: 1.5rem; font-weight: 700; color: var(--primary-600); }
        .profile-stat-label { font-size: 0.9rem; color: var(--neutral-500); }
        .empty-state { text-align: center; padding: 60px 20px; color: var(--neutral-500); }
        .empty-state svg { width: 80px; height: 80px; stroke: var(--neutral-300); margin-bottom: 20px; }
        .empty-state h3 { font-size: 1.25rem; color: var(--neutral-700); margin-bottom: 8px; }

        /* Mobile */
        .filter-toggle-mobile { display: none; width: 100%; padding: 14px 20px; background: white; border: 1px solid var(--neutral-200); border-radius: var(--radius-lg); font-weight: 600; cursor: pointer; font-family: inherit; color: var(--neutral-700); margin-bottom: 20px; align-items: center; justify-content: center; gap: 10px; }
        .filter-toggle-mobile svg { width: 20px; height: 20px; }
        .filter-count-badge { background: var(--primary-600); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
        .job-card:nth-child(1) { animation-delay: 0.05s; }
        .job-card:nth-child(2) { animation-delay: 0.1s; }
        .job-card:nth-child(3) { animation-delay: 0.15s; }
        .job-card:nth-child(4) { animation-delay: 0.2s; }
        .job-card:nth-child(5) { animation-delay: 0.25s; }
        .job-card:nth-child(6) { animation-delay: 0.3s; }
        .job-card:nth-child(7) { animation-delay: 0.35s; }
        .job-card:nth-child(8) { animation-delay: 0.4s; }
        .job-card:nth-child(9) { animation-delay: 0.45s; }
        .job-card:nth-child(10) { animation-delay: 0.5s; }
        .job-card:nth-child(11) { animation-delay: 0.55s; }
        .job-card:nth-child(12) { animation-delay: 0.6s; }

        @media (max-width: 1024px) {
            .main-content { grid-template-columns: 1fr; }
            .filters-sidebar { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 1001; border-radius: 0; display: none; overflow-y: auto; padding-bottom: calc(100px + env(safe-area-inset-bottom)); background: white; box-shadow: none; transform: translateX(-100%); transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1); }
            body.en .filters-sidebar { transform: translateX(100%); }
            .filters-sidebar.open { display: block; transform: translateX(0); animation: slideInFilter 0.35s cubic-bezier(0.4, 0, 0.2, 1); }
            @keyframes slideInFilter { from { transform: translateX(-100%); } to { transform: translateX(0); } }
            body.en @keyframes slideInFilter { from { transform: translateX(100%); } to { transform: translateX(0); } }
            .filter-backdrop { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 1000; opacity: 0; transition: opacity 0.35s ease; }
            .filter-backdrop.open { display: block; opacity: 1; animation: backdropFadeIn 0.35s ease; }
            @keyframes backdropFadeIn { from { opacity: 0; } to { opacity: 1; } }
            @supports (backdrop-filter: blur(6px)) {
                .filter-backdrop { background: rgba(0,0,0,0.6); backdrop-filter: blur(6px); }
            }
            .filters-sidebar .filters-header { position: sticky; top: 0; z-index: 10; margin: -24px -24px 24px -24px; padding: 20px 24px; padding-top: calc(20px + env(safe-area-inset-top)); border-bottom: 1px solid var(--neutral-200); background: white; }
            .filters-close-mobile { display: flex; }
            .filters-sidebar.open .filters-floating-close { display: flex; position: fixed; top: calc(70px + env(safe-area-inset-top)); left: 16px; width: 52px; height: 52px; background: linear-gradient(135deg, #11867c 0%, #0f6d65 100%); border: none; border-radius: 50%; box-shadow: 0 6px 20px rgba(17,134,124,0.4), 0 0 0 3px rgba(255,255,255,0.9); align-items: center; justify-content: center; z-index: 1002; cursor: pointer; transition: all 0.3s ease; animation: floatButtonIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both; }
            @keyframes floatButtonIn { from { opacity: 0; transform: scale(0.5) rotate(-90deg); } to { opacity: 1; transform: scale(1) rotate(0deg); } }
            .filters-floating-close svg { width: 26px; height: 26px; stroke: white; }
            .filters-floating-close:active { background: linear-gradient(135deg, #0f6d65 0%, #0a4943 100%); transform: scale(0.95); box-shadow: 0 3px 12px rgba(17,134,124,0.4), 0 0 0 2px rgba(255,255,255,0.9); }
            .show-results-btn { display: block; position: sticky; bottom: calc(20px + env(safe-area-inset-bottom)); margin-top: 24px; box-shadow: 0 -6px 24px rgba(0,0,0,0.15), 0 4px 16px rgba(17,134,124,0.3); background: linear-gradient(135deg, #11867c 0%, #0f6d65 100%); transition: all 0.3s ease; }
            .show-results-btn:active { transform: scale(0.98); box-shadow: 0 -2px 12px rgba(0,0,0,0.1), 0 2px 8px rgba(17,134,124,0.2); }
            .nav { display: none; }
            .mobile-menu-btn { display: flex; }
            .filter-toggle-mobile { display: flex; }
        }
        @media (max-width: 768px) {
            .header-content { padding: 0 16px; }
            .hero { padding: 32px 16px; }
            .hero-title { font-size: 1.5rem; }
            .search-box { flex-direction: column; }
            .search-field { min-width: 100%; }
            .search-btn { width: 100%; justify-content: center; }
            .main-content { padding: 20px 16px; }
            .jobs-grid { grid-template-columns: 1fr; }
            .jobs-header { flex-direction: column; align-items: stretch; }
            .stats-bar { gap: 24px; }
            .stat-value { font-size: 1.5rem; }
            .modal { margin: 10px; max-height: calc(100vh - 20px); }
            .modal-job-header { flex-direction: column; text-align: center; }
            .modal-company-logo { margin: 0 auto; }
            .btn-ghost { display: none; }
        }
        @media (max-width: 480px) {
            .header-actions .btn-primary span { display: none; }
            .logo-text { font-size: 1.4rem; }
        }

        /* Homepage Sections */
        .home-section { padding: 80px 24px; position: relative; z-index: 1; }
        .home-section:nth-child(even) { background: white; }
        .section-header { text-align: center; margin-bottom: 48px; }
        .section-title { font-family: 'Tajawal', sans-serif; font-size: 2rem; font-weight: 700; color: var(--neutral-900); margin-bottom: 12px; }
        body.en .section-title { font-family: 'Inter', sans-serif; }
        .section-subtitle { color: var(--neutral-500); font-size: 1.1rem; max-width: 600px; margin: 0 auto; }
        .section-content { max-width: 1200px; margin: 0 auto; }

        /* Featured Jobs */
        .featured-jobs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 24px; }
        .view-all-btn { display: inline-flex; align-items: center; gap: 8px; margin-top: 40px; padding: 14px 32px; background: linear-gradient(135deg, var(--primary-600), var(--primary-700)); color: white; border-radius: var(--radius-lg); font-weight: 600; text-decoration: none; transition: all 0.3s; }
        .view-all-btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .view-all-btn svg { width: 20px; height: 20px; }

        /* Featured Companies */
        .featured-companies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 24px; }
        .featured-company-card { background: white; border-radius: var(--radius-xl); padding: 24px; border: 1px solid var(--neutral-100); text-align: center; transition: all 0.3s; cursor: pointer; }
        .featured-company-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-4px); border-color: var(--primary-200); }
        .featured-company-logo { width: 80px; height: 80px; margin: 0 auto 16px; border-radius: var(--radius-lg); overflow: hidden; display: flex; align-items: center; justify-content: center; background: var(--neutral-50); }
        .featured-company-logo img { width: 100%; height: 100%; object-fit: contain; padding: 8px; }
        .featured-company-logo.text-logo { font-weight: 700; font-size: 0.9rem; }
        .featured-company-name { font-weight: 600; font-size: 1rem; color: var(--neutral-800); margin-bottom: 4px; }
        .featured-company-jobs { font-size: 0.85rem; color: var(--primary-600); font-weight: 500; }

        /* Job Categories */
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .category-card { background: white; border-radius: var(--radius-xl); padding: 28px 24px; border: 1px solid var(--neutral-100); text-align: center; transition: all 0.3s; cursor: pointer; position: relative; overflow: hidden; }
        .category-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--primary-500), var(--primary-600)); opacity: 0; transition: opacity 0.3s; }
        .category-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-4px); }
        .category-card:hover::before { opacity: 1; }
        .category-icon { width: 60px; height: 60px; margin: 0 auto 16px; border-radius: var(--radius-lg); background: linear-gradient(135deg, rgba(13,148,136,0.1), rgba(13,148,136,0.2)); display: flex; align-items: center; justify-content: center; }
        .category-icon svg { width: 28px; height: 28px; stroke: var(--primary-600); }
        .category-name { font-weight: 600; font-size: 1rem; color: var(--neutral-800); margin-bottom: 4px; }
        .category-count { font-size: 0.85rem; color: var(--neutral-500); }

        /* How It Works */
        .how-it-works { background: linear-gradient(135deg, var(--primary-800), var(--primary-600)); color: white; }
        .how-it-works .section-title { color: white; }
        .how-it-works .section-subtitle { color: rgba(255,255,255,0.8); }
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; }
        .step-card { text-align: center; position: relative; }
        .step-number { width: 60px; height: 60px; margin: 0 auto 20px; border-radius: 50%; background: rgba(255,255,255,0.15); display: flex; align-items: center; justify-content: center; font-family: 'Tajawal', sans-serif; font-size: 1.5rem; font-weight: 700; border: 2px solid rgba(255,255,255,0.3); }
        body.en .step-number { font-family: 'Inter', sans-serif; }
        .step-icon { width: 80px; height: 80px; margin: 0 auto 20px; border-radius: var(--radius-xl); background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; }
        .step-icon svg { width: 40px; height: 40px; stroke: white; }
        .step-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 12px; }
        .step-desc { color: rgba(255,255,255,0.8); line-height: 1.7; }

        /* Stats Section Enhancement */
        .stats-section { background: white; border-top: 1px solid var(--neutral-100); }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; max-width: 1000px; margin: 0 auto; }
        .stat-card { text-align: center; }
        .stat-card-value { font-family: 'Tajawal', sans-serif; font-size: 2.5rem; font-weight: 800; color: var(--primary-600); margin-bottom: 8px; }
        body.en .stat-card-value { font-family: 'Inter', sans-serif; }
        .stat-card-label { color: var(--neutral-500); font-size: 1rem; }

        /* Homepage Responsive */
        @media (max-width: 768px) {
            .home-section { padding: 48px 16px; }
            .section-title { font-size: 1.5rem; }
            .featured-jobs-grid { grid-template-columns: 1fr; }
            .featured-companies-grid { grid-template-columns: repeat(2, 1fr); }
            .categories-grid { grid-template-columns: repeat(2, 1fr); }
            .steps-grid { grid-template-columns: 1fr; gap: 32px; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 24px; }
            .stat-card-value { font-size: 2rem; }
        }
        @media (max-width: 480px) {
            .featured-companies-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .categories-grid { grid-template-columns: 1fr; }
        }

        /* Company Filter Tabs */
        .company-filter-tabs { display: flex; gap: 12px; margin-bottom: 32px; flex-wrap: wrap; justify-content: center; }
        .company-filter-tab { display: flex; align-items: center; gap: 8px; padding: 12px 24px; border: 2px solid var(--neutral-200); border-radius: var(--radius-lg); background: white; font-family: inherit; font-size: 0.95rem; font-weight: 500; color: var(--neutral-600); cursor: pointer; transition: all 0.2s; }
        .company-filter-tab:hover { border-color: var(--primary-300); color: var(--primary-700); }
        .company-filter-tab.active { border-color: var(--primary-500); background: rgba(20,184,166,0.08); color: var(--primary-700); }
        .tab-icon { display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 6px; }
        .tab-icon svg { width: 16px; height: 16px; }
        .tab-icon.govt { background: rgba(13,148,136,0.15); color: var(--primary-600); }
        .tab-icon.semi-govt { background: rgba(139,92,246,0.15); color: #7c3aed; }
        .tab-icon.private { background: rgba(217,119,6,0.15); color: #d97706; }
        .tab-count { background: var(--neutral-100); padding: 2px 10px; border-radius: 20px; font-size: 0.8rem; color: var(--neutral-500); }
        .company-filter-tab.active .tab-count { background: var(--primary-100); color: var(--primary-700); }

        /* Enhanced Company Card */
        .company-card { position: relative; overflow: hidden; }
        .company-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--primary-500), var(--primary-600)); opacity: 0; transition: opacity 0.3s; }
        .company-card:hover::before { opacity: 1; }
        .company-card-logo img { width: 100%; height: 100%; object-fit: contain; padding: 8px; }
        .company-card-actions { margin-top: 16px; }
        .company-card-btn { width: 100%; padding: 10px 16px; background: linear-gradient(135deg, var(--primary-600), var(--primary-700)); color: white; border: none; border-radius: var(--radius-md); font-family: inherit; font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; }
        .company-card-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }

        /* Company Filter Responsive */
        @media (max-width: 768px) {
            .company-filter-tabs { gap: 8px; overflow-x: auto; flex-wrap: nowrap; justify-content: flex-start; padding-bottom: 8px; -webkit-overflow-scrolling: touch; }
            .company-filter-tab { padding: 10px 16px; font-size: 0.85rem; white-space: nowrap; flex-shrink: 0; }
        }

        /* Mobile Menu Overlay */
        .menu-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 98; backdrop-filter: blur(2px); }

        /* Mobile Menu Close Button */
        .mobile-menu-close { display: none; position: absolute; top: 12px; left: 12px; width: 40px; height: 40px; border: none; background: var(--neutral-100); border-radius: 50%; cursor: pointer; align-items: center; justify-content: center; z-index: 100; }
        body.en .mobile-menu-close { left: auto; right: 12px; }
        .mobile-menu-close svg { width: 24px; height: 24px; stroke: var(--neutral-600); }
        .mobile-menu-close:hover { background: var(--neutral-200); }

        /* Mobile Navigation */
        @media (max-width: 1024px) {
            .nav.open { display: flex; flex-direction: column; position: fixed; top: 0; right: 0; width: 280px; height: 100vh; background: white; padding: 70px 16px 16px; box-shadow: var(--shadow-xl); z-index: 99; animation: slideIn 0.3s ease; }
            body.en .nav.open { right: auto; left: 0; }
            .nav.open .mobile-menu-close { display: flex; }
            .nav.open .nav-link { padding: 16px; width: 100%; text-align: right; border-radius: var(--radius-md); font-size: 1.1rem; border-bottom: 1px solid var(--neutral-100); }
            .nav.open .nav-link:hover { background: var(--neutral-50); }
            body.en .nav.open .nav-link { text-align: left; }
        }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        body.en @keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }

        /* Mobile Touch Improvements */
        @media (max-width: 768px) {
            .btn, .search-btn, .apply-btn, .company-card-btn, .view-all-btn, .filter-option, .category-card, .featured-company-card { min-height: 44px; }
            .job-card { cursor: pointer; -webkit-tap-highlight-color: transparent; }
            .category-card, .featured-company-card { -webkit-tap-highlight-color: transparent; }
        }

        /* Step Numbers for English */
        body.en .step-number:nth-child(1)::after { content: '1'; }
        body.en .step-card:first-child .step-number { content: '1'; }

        /* Applicant Count Box */
        .applicant-count-box { display: flex; align-items: center; gap: 10px; padding: 14px 18px; background: linear-gradient(135deg, rgba(20,184,166,0.08), rgba(13,148,136,0.12)); border-radius: var(--radius-md); margin: 16px 0; border: 1px solid rgba(20,184,166,0.2); }
        .applicant-count-box svg { width: 22px; height: 22px; stroke: var(--primary-600); }
        .applicant-count-box strong { color: var(--primary-700); font-size: 1.1rem; }

        /* Hiring Stages */
        .hiring-stages-section { margin: 24px 0; padding: 20px; background: var(--neutral-50); border-radius: var(--radius-lg); }
        .hiring-stages-title { font-size: 0.95rem; font-weight: 600; color: var(--neutral-700); margin-bottom: 16px; text-align: center; }
        .hiring-stages-track { display: flex; align-items: flex-start; justify-content: space-between; gap: 4px; }
        .hiring-stage { display: flex; flex-direction: column; align-items: center; flex: 1; max-width: 100px; }
        .stage-dot { width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-200); display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 600; color: var(--neutral-500); transition: all 0.3s; }
        .hiring-stage.active .stage-dot { background: var(--primary-600); color: white; box-shadow: 0 0 0 4px rgba(20,184,166,0.2); }
        .hiring-stage.completed .stage-dot { background: #10b981; color: white; }
        .stage-label { font-size: 0.7rem; color: var(--neutral-500); margin-top: 8px; text-align: center; line-height: 1.3; }
        .hiring-stage.active .stage-label { color: var(--primary-700); font-weight: 500; }
        .hiring-stage.completed .stage-label { color: #059669; }
        .stage-connector { flex: 0 0 auto; width: 20px; height: 3px; background: var(--neutral-200); margin-top: 15px; }
        .stage-connector.completed { background: #10b981; }

        /* Mini Hiring Stages for Job Cards */
        .job-card-stages { margin: 12px 0; padding: 12px; background: var(--neutral-50); border-radius: var(--radius-md); }
        .job-card-stages-title { font-size: 0.75rem; color: var(--neutral-500); margin-bottom: 10px; font-weight: 500; }
        .mini-stages { display: flex; align-items: flex-start; justify-content: space-between; gap: 4px; }
        .mini-stage { display: flex; flex-direction: column; align-items: center; flex: 1; }
        .mini-stage-dot { width: 24px; height: 24px; border-radius: 50%; background: var(--neutral-200); display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: 600; color: var(--neutral-500); transition: all 0.3s; }
        .mini-stage.completed .mini-stage-dot { background: #10b981; color: white; }
        .mini-stage.active .mini-stage-dot { background: var(--primary-600); color: white; box-shadow: 0 0 0 3px rgba(20,184,166,0.2); }
        .mini-stage-label { font-size: 0.6rem; color: var(--neutral-400); margin-top: 4px; text-align: center; line-height: 1.2; max-width: 50px; }
        .mini-stage.completed .mini-stage-label { color: #059669; }
        .mini-stage.active .mini-stage-label { color: var(--primary-700); font-weight: 500; }
        .mini-stage-connector { width: 100%; height: 2px; background: var(--neutral-200); margin-top: 11px; flex: 0 0 8px; max-width: 8px; }
        .mini-stage-connector.completed { background: #10b981; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        .job-card-applicants { display: flex; align-items: center; gap: 6px; font-size: 0.8rem; color: var(--neutral-500); margin-bottom: 8px; }
        .job-card-applicants svg { width: 16px; height: 16px; stroke: var(--primary-500); }
        .job-card-applicants strong { color: var(--primary-700); }

        /* Apply Form Modal */
        .apply-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 1100; display: none; align-items: center; justify-content: center; padding: 20px; }
        .apply-modal-overlay.open { display: flex; }
        @supports (backdrop-filter: blur(4px)) {
            .apply-modal-overlay { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
        }
        .apply-modal { background: white; border-radius: var(--radius-xl); max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto; animation: modalIn 0.3s ease; }
        .apply-modal-header { padding: 24px 24px 16px; border-bottom: 1px solid var(--neutral-200); position: relative; }
        .apply-modal-header h2 { font-size: 1.25rem; font-weight: 700; }
        .apply-modal-close { position: absolute; top: 16px; left: 16px; width: 32px; height: 32px; border: none; background: var(--neutral-100); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        body.en .apply-modal-close { left: auto; right: 16px; }
        .apply-modal-close svg { width: 18px; height: 18px; stroke: var(--neutral-600); }
        .apply-modal-body { padding: 24px; }
        .apply-form-group { margin-bottom: 20px; }
        .apply-form-group label { display: block; font-weight: 500; font-size: 0.9rem; color: var(--neutral-700); margin-bottom: 8px; }
        .apply-form-group input, .apply-form-group textarea { width: 100%; padding: 12px 16px; border: 2px solid var(--neutral-200); border-radius: var(--radius-md); font-size: 1rem; font-family: inherit; transition: all 0.2s; }
        .apply-form-group input:focus, .apply-form-group textarea:focus { outline: none; border-color: var(--primary-400); }
        .apply-form-group textarea { resize: vertical; min-height: 80px; }
        .file-upload-box { border: 2px dashed var(--neutral-300); border-radius: var(--radius-md); padding: 24px; text-align: center; cursor: pointer; transition: all 0.2s; }
        .file-upload-box:hover { border-color: var(--primary-400); background: rgba(20,184,166,0.02); }
        .file-upload-box svg { width: 40px; height: 40px; stroke: var(--neutral-400); margin-bottom: 8px; }
        .file-upload-box p { color: var(--neutral-500); font-size: 0.9rem; }
        .file-upload-box input { display: none; }
        .file-name { margin-top: 8px; padding: 8px 12px; background: var(--primary-100); color: var(--primary-700); border-radius: var(--radius-sm); font-size: 0.85rem; display: none; }
        .apply-submit-btn { width: 100%; padding: 14px 24px; background: linear-gradient(135deg, var(--primary-600), var(--primary-700)); color: white; border: none; border-radius: var(--radius-md); font-size: 1rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.2s; }
        .apply-submit-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-lg); }

        /* Success Toast */
        .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(100px); background: #10b981; color: white; padding: 16px 24px; border-radius: var(--radius-md); display: flex; align-items: center; gap: 12px; box-shadow: var(--shadow-xl); z-index: 1200; opacity: 0; transition: all 0.3s ease; }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        .toast svg { width: 24px; height: 24px; stroke: white; }

        @media (max-width: 600px) {
            .hiring-stages-track { flex-wrap: wrap; gap: 12px; }
            .hiring-stage { flex: 0 0 calc(33% - 8px); max-width: none; }
            .stage-connector { display: none; }
            /* Mini stages on job cards - mobile optimization */
            .job-card-stages { padding: 10px; }
            .mini-stages { flex-wrap: wrap; gap: 8px; justify-content: center; }
            .mini-stage { flex: 0 0 auto; }
            .mini-stage-connector { display: none; }
            .mini-stage-label { font-size: 0.55rem; max-width: 45px; }
            .mini-stage-dot { width: 22px; height: 22px; font-size: 0.6rem; }
            .job-card-stages-title { font-size: 0.7rem; margin-bottom: 8px; }
        }
        @media (max-width: 400px) {
            .jobs-grid { grid-template-columns: 1fr; }
            .job-card { padding: 20px; }
            .mini-stage-label { display: none; }
            .mini-stages { gap: 6px; }
        }
    </style>
</head>
<body>
    <div class="pattern-bg"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo" onclick="showPage('home'); return false;">
                <svg class="logo-svg" viewBox="0 0 859 290" xmlns="http://www.w3.org/2000/svg">
                    <style>.st0{fill:#CFB485;}.st1{fill:#016664;}</style>
                    <g transform="translate(0,-77)">
                        <path class="st0" d="M738.71,164.82h-0.08c0,5.5-0.5,10.98-1.46,16.33l-15.55-2.83c0.81-4.42,1.21-8.96,1.21-13.5h0.08c0-41.32-33.62-74.94-74.94-74.94s-74.94,33.62-74.94,74.94c0,4.54,0.4,9.09,1.21,13.5l-15.55,2.83c-0.99-5.35-1.46-10.83-1.46-16.33c0-50.03,40.71-90.74,90.74-90.74C697.99,74.08,738.71,114.79,738.71,164.82"/>
                        <path class="st1" d="M697.23,241.05c14.28-9.25,25.66-22.26,32.89-37.63l-14.29-6.73c-5.98,12.7-15.38,23.45-27.18,31.1c-5.49,3.56-16.65,8.79-32.78,15.04v-56.61l20.44,20.44l11.17-11.17l-20.44-20.44h28.91v-15.79h-28.91l20.44-20.44l-11.17-11.17l-20.44,20.44v-28.91h-15.79v28.91l-20.44-20.44l-11.17,11.17l20.44,20.44h-28.91v15.79h28.91l-20.44,20.44l11.17,11.17l20.44-20.44v56.61c-16.14-6.26-27.29-11.49-32.78-15.04c-11.81-7.65-21.21-18.4-27.18-31.1l-14.29,6.73c7.23,15.37,18.6,28.38,32.89,37.63c4.86,3.15,14.74,7.55,27.4,12.51c-14.34,4.84-30.79,10-49.18,15.28v15.79c22.52-6.52,48.63-14.94,71.05-22.93c22.41,7.99,48.53,16.41,71.05,22.93v-15.79c-18.39-5.28-34.83-10.44-49.18-15.28C682.5,248.61,692.37,244.2,697.23,241.05z"/>
                        <path class="st1" d="M194.66,157.31h-39.4c-5.98,0-10.62-1.46-13.91-4.39c-3.29-2.94-4.93-7.06-4.93-12.37v-10.73h-12.75v11.91c0,9.19,2.43,16.22,7.33,21.08c4.88,4.85,12.1,7.28,21.7,7.28h54.71V121.2h-12.75V157.31z"/>
                        <path class="st1" d="M155.85,114.94c1.94,0,3.58-0.57,4.9-1.64c1.29-1.08,1.94-2.59,1.86-4.53c0-1.89-0.62-3.4-1.86-4.53c-1.27-1.16-2.88-1.7-4.9-1.64c-1.94,0-3.53,0.57-4.82,1.67c-1.29,1.11-1.91,2.61-1.91,4.5c0,1.94,0.62,3.45,1.91,4.53C152.32,114.38,153.91,114.94,155.85,114.94z"/>
                        <path class="st1" d="M175.47,114.94c1.94,0,3.56-0.57,4.85-1.64c1.27-1.08,1.91-2.59,1.91-4.53c0-1.89-0.62-3.4-1.89-4.53c-1.24-1.16-2.86-1.7-4.8-1.64c-1.94,0-3.56,0.57-4.88,1.67c-1.32,1.11-1.99,2.61-2.05,4.5c0,1.94,0.67,3.45,2.02,4.53C171.97,114.38,173.59,114.94,175.47,114.94z"/>
                        <rect x="222.23" y="100.63" class="st1" width="12.75" height="69.45"/>
                        <rect x="280.55" y="100.63" class="st1" width="12.75" height="69.45"/>
                        <path class="st1" d="M486.66,178.64c-2,0-3.65,0.6-4.97,1.8c-1.31,1.2-2,2.68-2.05,4.45c0,2,0.67,3.55,2.01,4.67c1.34,1.11,3.01,1.67,5.01,1.67c1.88,0,3.48-0.57,4.8-1.71c1.31-1.14,1.97-2.68,1.97-4.62c0-1.83-0.66-3.32-1.97-4.5C490.14,179.22,488.55,178.64,486.66,178.64z"/>
                        <path class="st1" d="M518.57,145.63c0-14.18-8.77-24.45-30.61-24.45h-32.41v12.76h32.41c14.34,0,19.04,3.32,19.04,11.67c0,9.71-6.27,11.67-19.04,11.67c-15.69,0-121.88,0-121.88,0v-9.3c0-8.96-2.14-15.67-6.42-20.12c-4.28-4.45-10.9-6.68-19.86-6.68h-19.61v12.76h21.58c4.11,0,7.19,1.09,9.25,3.26c2.06,2.17,3.08,5.34,3.08,9.5v10.62h-46.45v12.76h46.45v0.01h133.86C507.19,170.09,518.57,163.1,518.57,145.63z"/>
                        <path class="st1" d="M252.98,166.93c0,4.96-1,8.62-2.96,11c-1.97,2.37-5.07,3.56-9.3,3.56c-1.7,0-3.42-0.05-5.17-0.13c-1.75-0.08-3.64-0.19-5.69-0.3v10.7c3.99,0.81,9.46,1.21,13.53,1.21c4.9,0,9-1,12.32-2.91c3.31-1.94,5.82-4.85,7.49-8.71c1.7-3.85,2.53-8.65,2.53-14.42V121.2h-12.75V166.93z"/>
                        <text x="127" y="274" font-family="Arial,sans-serif" font-size="52" font-weight="bold" class="st1">JADARAT</text>
                    </g>
                </svg>
            </a>
            <nav class="nav">
                <button class="mobile-menu-close" onclick="closeMobileMenu()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
                <a class="nav-link" data-page="home" data-ar="الرئيسية" data-en="Home" onclick="showPage('home')">الرئيسية</a>
                <a class="nav-link active" data-page="jobs" data-ar="الوظائف" data-en="Jobs" onclick="showPage('jobs')">الوظائف</a>
                <a class="nav-link" data-page="companies" data-ar="الشركات" data-en="Companies" onclick="showPage('companies')">الشركات</a>
                <a class="nav-link" data-page="applications" data-ar="طلباتي" data-en="My Applications" onclick="showPage('applications')">طلباتي</a>
                <a class="nav-link" data-page="profile" data-ar="الملف الشخصي" data-en="Profile" onclick="showPage('profile')">الملف الشخصي</a>
            </nav>
            <div class="header-actions">
                <div class="lang-toggle">
                    <button class="lang-btn active" onclick="setLanguage('ar')">عربي</button>
                    <button class="lang-btn" onclick="setLanguage('en')">EN</button>
                </div>
                <a href="#" class="btn btn-ghost" data-ar="تسجيل الدخول" data-en="Login">تسجيل الدخول</a>
                <a href="#" class="btn btn-primary"><span data-ar="إنشاء حساب" data-en="Sign Up">إنشاء حساب</span></a>
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg></button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="menuOverlay" class="menu-overlay" onclick="closeMobileMenu()" style="display:none;"></div>

    <!-- HOME PAGE -->
    <div id="page-home" class="page">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title" data-ar="اكتشف الفرص الوظيفية المناسبة لك" data-en="Discover the Right Career Opportunities">اكتشف الفرص الوظيفية المناسبة لك</h1>
                <p class="hero-subtitle" data-ar="أكثر من ٣٨,٠٠٠ فرصة عمل في القطاعين الحكومي والخاص" data-en="Over 38,000 job opportunities in public and private sectors">أكثر من ٣٨,٠٠٠ فرصة عمل في القطاعين الحكومي والخاص</p>
                <div class="search-box">
                    <div class="search-field">
                        <input type="text" id="homeSearchKeyword" data-ar-placeholder="المسمى الوظيفي أو الكلمة المفتاحية..." data-en-placeholder="Job title or keyword..." placeholder="المسمى الوظيفي أو الكلمة المفتاحية...">
                        <span class="search-field-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></span>
                    </div>
                    <button class="search-btn" onclick="searchFromHome()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><span data-ar="بحث" data-en="Search">بحث</span></button>
                </div>
                <div class="stats-bar">
                    <div class="stat-item"><div class="stat-value">٣٨,٥٧٧+</div><div class="stat-label" data-ar="وظيفة متاحة" data-en="Available Jobs">وظيفة متاحة</div></div>
                    <div class="stat-item"><div class="stat-value">١٥,٨٠٠+</div><div class="stat-label" data-ar="شركة مسجلة" data-en="Registered Companies">شركة مسجلة</div></div>
                    <div class="stat-item"><div class="stat-value">٢,٣٠٠+</div><div class="stat-label" data-ar="تم التوظيف هذا الشهر" data-en="Hired This Month">تم التوظيف هذا الشهر</div></div>
                </div>
            </div>
        </section>

        <!-- Featured Jobs Section -->
        <section class="home-section">
            <div class="section-header">
                <h2 class="section-title" data-ar="أحدث الوظائف" data-en="Latest Jobs">أحدث الوظائف</h2>
                <p class="section-subtitle" data-ar="اكتشف أحدث الفرص الوظيفية المتاحة في المملكة" data-en="Discover the latest job opportunities available in the Kingdom">اكتشف أحدث الفرص الوظيفية المتاحة في المملكة</p>
            </div>
            <div class="section-content">
                <div class="featured-jobs-grid" id="featuredJobsGrid"></div>
                <div style="text-align:center;">
                    <a href="#" class="view-all-btn" onclick="showPage('jobs'); return false;">
                        <span data-ar="عرض جميع الوظائف" data-en="View All Jobs">عرض جميع الوظائف</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>
            </div>
        </section>

        <!-- Job Categories Section -->
        <section class="home-section">
            <div class="section-header">
                <h2 class="section-title" data-ar="تصفح حسب التخصص" data-en="Browse by Category">تصفح حسب التخصص</h2>
                <p class="section-subtitle" data-ar="اختر التخصص المناسب لك واكتشف الفرص المتاحة" data-en="Choose your specialization and discover available opportunities">اختر التخصص المناسب لك واكتشف الفرص المتاحة</p>
            </div>
            <div class="section-content">
                <div class="categories-grid" id="categoriesGrid"></div>
            </div>
        </section>

        <!-- Featured Companies Section -->
        <section class="home-section">
            <div class="section-header">
                <h2 class="section-title" data-ar="أبرز الشركات" data-en="Top Companies">أبرز الشركات</h2>
                <p class="section-subtitle" data-ar="انضم إلى أفضل الشركات في المملكة العربية السعودية" data-en="Join the top companies in Saudi Arabia">انضم إلى أفضل الشركات في المملكة العربية السعودية</p>
            </div>
            <div class="section-content">
                <div class="featured-companies-grid" id="featuredCompaniesGrid"></div>
                <div style="text-align:center;">
                    <a href="#" class="view-all-btn" onclick="showPage('companies'); return false;">
                        <span data-ar="عرض جميع الشركات" data-en="View All Companies">عرض جميع الشركات</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="home-section how-it-works">
            <div class="section-header">
                <h2 class="section-title" data-ar="كيف تعمل المنصة؟" data-en="How It Works">كيف تعمل المنصة؟</h2>
                <p class="section-subtitle" data-ar="ثلاث خطوات بسيطة للحصول على وظيفة أحلامك" data-en="Three simple steps to get your dream job">ثلاث خطوات بسيطة للحصول على وظيفة أحلامك</p>
            </div>
            <div class="section-content">
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">١</div>
                        <div class="step-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                        </div>
                        <h3 class="step-title" data-ar="ابحث عن الوظائف" data-en="Search for Jobs">ابحث عن الوظائف</h3>
                        <p class="step-desc" data-ar="استخدم الفلاتر المتقدمة للعثور على الوظيفة المناسبة لمهاراتك وخبراتك" data-en="Use advanced filters to find the right job for your skills and experience">استخدم الفلاتر المتقدمة للعثور على الوظيفة المناسبة لمهاراتك وخبراتك</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">٢</div>
                        <div class="step-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10,9 9,9 8,9"/></svg>
                        </div>
                        <h3 class="step-title" data-ar="قدم طلبك" data-en="Submit Application">قدم طلبك</h3>
                        <p class="step-desc" data-ar="أرسل سيرتك الذاتية وتقدم للوظائف التي تناسبك بنقرة واحدة" data-en="Send your CV and apply for jobs that suit you with one click">أرسل سيرتك الذاتية وتقدم للوظائف التي تناسبك بنقرة واحدة</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">٣</div>
                        <div class="step-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22,4 12,14.01 9,11.01"/></svg>
                        </div>
                        <h3 class="step-title" data-ar="احصل على الوظيفة" data-en="Get Hired">احصل على الوظيفة</h3>
                        <p class="step-desc" data-ar="تابع حالة طلباتك واستعد للمقابلة للحصول على وظيفة أحلامك" data-en="Track your application status and prepare for interviews to land your dream job">تابع حالة طلباتك واستعد للمقابلة للحصول على وظيفة أحلامك</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="home-section stats-section">
            <div class="section-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-value" id="statJobs">٣٨,٥٧٧+</div>
                        <div class="stat-card-label" data-ar="وظيفة متاحة" data-en="Available Jobs">وظيفة متاحة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="statCompanies">١٥,٨٠٠+</div>
                        <div class="stat-card-label" data-ar="شركة مسجلة" data-en="Registered Companies">شركة مسجلة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="statHired">٢,٣٠٠+</div>
                        <div class="stat-card-label" data-ar="تم التوظيف هذا الشهر" data-en="Hired This Month">تم التوظيف هذا الشهر</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-value" id="statSectors">٣</div>
                        <div class="stat-card-label" data-ar="قطاعات مختلفة" data-en="Different Sectors">قطاعات مختلفة</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- JOBS PAGE -->
    <div id="page-jobs" class="page active">
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title" data-ar="استكشف الوظائف" data-en="Explore Jobs">استكشف الوظائف</h1>
                <p class="hero-subtitle" data-ar="ابحث في آلاف الفرص الوظيفية" data-en="Search through thousands of job opportunities">ابحث في آلاف الفرص الوظيفية</p>
                <div class="search-box">
                    <div class="search-field">
                        <input type="text" id="searchKeyword" data-ar-placeholder="المسمى الوظيفي..." data-en-placeholder="Job title..." placeholder="المسمى الوظيفي...">
                        <span class="search-field-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></span>
                    </div>
                    <div class="search-field">
                        <select id="searchLocation"></select>
                        <span class="search-field-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></span>
                    </div>
                    <button class="search-btn" onclick="applyFilters()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><span data-ar="بحث" data-en="Search">بحث</span></button>
                </div>
            </div>
        </section>
        <main class="main-content">
            <div class="filter-backdrop" id="filterBackdrop" onclick="toggleFilters()"></div>
            <aside class="filters-sidebar" id="filtersSidebar">
                <button class="filters-floating-close" onclick="toggleFilters()" aria-label="Close filters"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
                <div class="filters-header">
                    <span class="filters-title"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg><span data-ar="تصفية النتائج" data-en="Filter Results">تصفية النتائج</span></span>
                    <div class="filters-header-actions">
                        <button class="clear-filters" onclick="clearAllFilters()" data-ar="مسح الكل" data-en="Clear All">مسح الكل</button>
                        <button class="filters-close-mobile" onclick="toggleFilters()" aria-label="Close filters"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
                    </div>
                </div>
                <div class="filter-group"><label class="filter-label" data-ar="نوع العمل" data-en="Job Type">نوع العمل</label><div class="filter-options" id="jobTypeFilters"></div></div>
                <div class="filter-group"><label class="filter-label" data-ar="القطاع" data-en="Sector">القطاع</label><div class="sector-filter-group" id="sectorFilters"></div></div>
                <div class="filter-group"><label class="filter-label" data-ar="مستوى الخبرة" data-en="Experience Level">مستوى الخبرة</label><div class="filter-options" id="experienceFilters"></div></div>
                <div class="filter-group"><label class="filter-label" data-ar="نطاق الراتب (شهري)" data-en="Salary Range (Monthly)">نطاق الراتب (شهري)</label>
                    <div class="salary-slider">
                        <div class="salary-inputs">
                            <div class="salary-input-group"><span class="salary-input-label" data-ar="من" data-en="From">من</span><input type="text" class="salary-input" id="salaryMin" value="٣,٠٠٠" readonly></div>
                            <div class="salary-input-group"><span class="salary-input-label" data-ar="إلى" data-en="To">إلى</span><input type="text" class="salary-input" id="salaryMax" value="٥٠,٠٠٠" readonly></div>
                        </div>
                        <div class="range-slider"><div class="range-slider-fill" id="salarySliderFill"></div><input type="range" id="salaryMinRange" min="3000" max="50000" value="3000" step="1000"><input type="range" id="salaryMaxRange" min="3000" max="50000" value="50000" step="1000"></div>
                    </div>
                </div>
                <div class="filter-group"><label class="filter-label" data-ar="تاريخ النشر" data-en="Posted Date">تاريخ النشر</label><div class="filter-options" id="dateFilters"></div></div>
                <div class="filter-group"><label class="filter-label" data-ar="التخصصات" data-en="Specializations">التخصصات</label><div class="filter-tags" id="specializationFilters"></div></div>
                <button class="show-results-btn" onclick="toggleFilters()" data-ar="عرض النتائج" data-en="Show Results">عرض النتائج</button>
            </aside>
            <section class="jobs-section">
                <button class="filter-toggle-mobile" onclick="toggleFilters()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg><span data-ar="تصفية النتائج" data-en="Filter Results">تصفية النتائج</span><span class="filter-count-badge" id="activeFilterCount" style="display:none;">0</span></button>
                <div class="jobs-header">
                    <p class="jobs-count"><span data-ar="عرض" data-en="Showing">عرض</span> <strong id="filteredJobsCount">0</strong> <span data-ar="وظيفة" data-en="jobs">وظيفة</span></p>
                    <div class="jobs-controls">
                        <select class="sort-select" id="sortSelect" onchange="applyFilters()"></select>
                        <div class="view-toggles">
                            <button class="view-btn active" onclick="setView('grid',this)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></button>
                            <button class="view-btn" onclick="setView('list',this)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
                        </div>
                    </div>
                </div>
                <div id="activeFiltersContainer" class="active-filters"></div>
                <div class="jobs-grid" id="jobsGrid"></div>
                <div id="pagination" class="pagination"></div>
            </section>
        </main>
    </div>

    <!-- COMPANIES PAGE -->
    <div id="page-companies" class="page">
        <div class="page-header"><h1 class="page-title" data-ar="الشركات" data-en="Companies">الشركات</h1><p class="page-subtitle" data-ar="استكشف أفضل الشركات في المملكة" data-en="Explore top companies in the Kingdom">استكشف أفضل الشركات في المملكة</p></div>
        <div class="page-content">
            <!-- Sector Filter Tabs -->
            <div class="company-filter-tabs" id="companyFilterTabs">
                <button class="company-filter-tab active" data-sector="all" onclick="filterCompanies('all', this)">
                    <span data-ar="الكل" data-en="All">الكل</span>
                    <span class="tab-count" id="countAll">12</span>
                </button>
                <button class="company-filter-tab" data-sector="govt" onclick="filterCompanies('govt', this)">
                    <span class="tab-icon govt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 21h18M3 10h18M5 6l7-3 7 3M4 10v11M20 10v11M8 14v3M12 14v3M16 14v3"/></svg></span>
                    <span data-ar="حكومي" data-en="Government">حكومي</span>
                    <span class="tab-count" id="countGovt">2</span>
                </button>
                <button class="company-filter-tab" data-sector="semi-govt" onclick="filterCompanies('semi-govt', this)">
                    <span class="tab-icon semi-govt"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16M3 21h18M9 6h1M9 10h1M9 14h1M14 6h1M14 10h1M14 14h1"/></svg></span>
                    <span data-ar="شبه حكومي" data-en="Semi-Government">شبه حكومي</span>
                    <span class="tab-count" id="countSemiGovt">3</span>
                </button>
                <button class="company-filter-tab" data-sector="private" onclick="filterCompanies('private', this)">
                    <span class="tab-icon private"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg></span>
                    <span data-ar="خاص" data-en="Private">خاص</span>
                    <span class="tab-count" id="countPrivate">7</span>
                </button>
            </div>
            <div class="companies-grid" id="companiesGrid"></div>
        </div>
    </div>

    <!-- APPLICATIONS PAGE -->
    <div id="page-applications" class="page">
        <div class="page-header"><h1 class="page-title" data-ar="طلباتي" data-en="My Applications">طلباتي</h1><p class="page-subtitle" data-ar="تتبع حالة طلبات التوظيف" data-en="Track your job applications">تتبع حالة طلبات التوظيف</p></div>
        <div class="page-content"><div class="applications-list" id="applicationsList"></div></div>
    </div>

    <!-- PROFILE PAGE -->
    <div id="page-profile" class="page">
        <div class="page-header"><h1 class="page-title" data-ar="الملف الشخصي" data-en="Profile">الملف الشخصي</h1><p class="page-subtitle" data-ar="إدارة معلوماتك الشخصية" data-en="Manage your personal information">إدارة معلوماتك الشخصية</p></div>
        <div class="page-content"><div class="profile-card" id="profileCard"></div></div>
    </div>

    <!-- JOB MODAL -->
    <div class="modal-overlay" id="jobModal" role="dialog" aria-modal="true" aria-labelledby="modalJobTitle" onclick="if(event.target===this)closeModal()">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()" aria-label="Close"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
            <div class="modal-header"><div id="modalHeader"></div></div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter"></div>
        </div>
    </div>

    <!-- APPLY FORM MODAL -->
    <div class="apply-modal-overlay" id="applyModal" role="dialog" aria-modal="true" aria-labelledby="applyFormTitle" onclick="if(event.target===this)closeApplyForm()">
        <div class="apply-modal">
            <div class="apply-modal-header">
                <button class="apply-modal-close" onclick="closeApplyForm()" aria-label="Close"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
                <h2 id="applyFormTitle"></h2>
                <p id="applyFormJob" style="color:var(--neutral-500);margin-top:4px;"></p>
            </div>
            <div class="apply-modal-body">
                <form id="applicationForm" onsubmit="submitApplication(event)">
                    <div class="apply-form-group">
                        <label id="labelName"></label>
                        <input type="text" id="appName" required>
                    </div>
                    <div class="apply-form-group">
                        <label id="labelEmail"></label>
                        <input type="email" id="appEmail" required>
                    </div>
                    <div class="apply-form-group">
                        <label id="labelPhone"></label>
                        <input type="tel" id="appPhone" required>
                    </div>
                    <div class="apply-form-group">
                        <label id="labelResume"></label>
                        <div class="file-upload-box" onclick="document.getElementById('appResume').click()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            <p id="uploadLabel"></p>
                            <input type="file" id="appResume" accept=".pdf,.doc,.docx" onchange="showFileName(this)">
                        </div>
                        <div class="file-name" id="fileNameDisplay"></div>
                    </div>
                    <div class="apply-form-group">
                        <label id="labelCover"></label>
                        <textarea id="appCover" rows="3"></textarea>
                    </div>
                    <button type="submit" class="apply-submit-btn" id="submitBtnText"></button>
                </form>
            </div>
        </div>
    </div>

    <!-- SUCCESS TOAST -->
    <div class="toast" id="successToast" role="status" aria-live="polite" aria-atomic="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        <span id="toastMessage"></span>
    </div>

    <script>
// Language & Translations
let currentLang = 'ar';
const translations = {
    locations: { ar: ['جميع المناطق','الرياض','جدة','مكة المكرمة','المدينة المنورة','الدمام','الظهران','الخبر','الجبيل','تبوك','أبها','حائل','نجران'], en: ['All Locations','Riyadh','Jeddah','Makkah','Madinah','Dammam','Dhahran','Khobar','Jubail','Tabuk','Abha','Hail','Najran'] },
    jobTypes: { ar: [{id:'fulltime',label:'دوام كامل'},{id:'parttime',label:'دوام جزئي'},{id:'remote',label:'عن بُعد'},{id:'contract',label:'عقد مؤقت'}], en: [{id:'fulltime',label:'Full-time'},{id:'parttime',label:'Part-time'},{id:'remote',label:'Remote'},{id:'contract',label:'Contract'}] },
    sectors: { ar: [{id:'govt',label:'حكومي'},{id:'semi-govt',label:'شبه حكومي'},{id:'private',label:'خاص'}], en: [{id:'govt',label:'Government'},{id:'semi-govt',label:'Semi-Government'},{id:'private',label:'Private'}] },
    experience: { ar: [{id:'fresh',label:'حديث التخرج'},{id:'entry',label:'مبتدئ (١-٣ سنوات)'},{id:'mid',label:'متوسط (٤-٧ سنوات)'},{id:'senior',label:'خبير (+٨ سنوات)'}], en: [{id:'fresh',label:'Fresh Graduate'},{id:'entry',label:'Entry (1-3 years)'},{id:'mid',label:'Mid (4-7 years)'},{id:'senior',label:'Senior (8+ years)'}] },
    postedDate: { ar: [{id:'today',label:'اليوم',days:1},{id:'week',label:'هذا الأسبوع',days:7},{id:'month',label:'هذا الشهر',days:30}], en: [{id:'today',label:'Today',days:1},{id:'week',label:'This Week',days:7},{id:'month',label:'This Month',days:30}] },
    specializations: { ar: [{id:'it',label:'تقنية المعلومات'},{id:'engineering',label:'الهندسة'},{id:'accounting',label:'المحاسبة والمالية'},{id:'marketing',label:'التسويق'},{id:'medical',label:'الطب والصحة'},{id:'hr',label:'الموارد البشرية'},{id:'education',label:'التعليم'},{id:'legal',label:'القانون'}], en: [{id:'it',label:'IT'},{id:'engineering',label:'Engineering'},{id:'accounting',label:'Finance'},{id:'marketing',label:'Marketing'},{id:'medical',label:'Healthcare'},{id:'hr',label:'HR'},{id:'education',label:'Education'},{id:'legal',label:'Legal'}] },
    sortOptions: { ar: [{value:'newest',label:'الأحدث'},{value:'salary-high',label:'الأعلى راتباً'},{value:'salary-low',label:'الأقل راتباً'}], en: [{value:'newest',label:'Newest'},{value:'salary-high',label:'Highest Salary'},{value:'salary-low',label:'Lowest Salary'}] },
    expLabels: { ar: {fresh:'حديث التخرج',entry:'١-٣ سنوات',mid:'٤-٧ سنوات',senior:'+٨ سنوات'}, en: {fresh:'Fresh Graduate',entry:'1-3 years',mid:'4-7 years',senior:'8+ years'} },
    typeLabels: { ar: {fulltime:'دوام كامل',parttime:'دوام جزئي',remote:'عن بُعد',contract:'عقد'}, en: {fulltime:'Full-time',parttime:'Part-time',remote:'Remote',contract:'Contract'} },
    sectorLabels: { ar: {govt:'حكومي','semi-govt':'شبه حكومي',private:'خاص'}, en: {govt:'Government','semi-govt':'Semi-Govt',private:'Private'} },
    currency: { ar: '<span class="sar-symbol"></span>', en: '<span class="sar-symbol"></span>' },
    postedLabels: { ar: (d)=>d===0?'اليوم':d===1?'منذ يوم':d<=7?`منذ ${toArabicNum(d)} أيام`:'منذ أسبوع+', en: (d)=>d===0?'Today':d===1?'1 day ago':d<=7?`${d} days ago`:'1 week+' },
    noResults: { ar: {title:'لا توجد نتائج',desc:'جرب تغيير معايير البحث'}, en: {title:'No Results',desc:'Try changing your search criteria'} },
    apply: { ar: 'تقديم', en: 'Apply' },
    jobDesc: { ar: 'وصف الوظيفة', en: 'Job Description' },
    requirements: { ar: 'المتطلبات', en: 'Requirements' },
    benefits: { ar: 'المزايا', en: 'Benefits' },
    savedJobs: { ar: 'الوظائف المحفوظة', en: 'Saved Jobs' },
    applications: { ar: 'الطلبات المقدمة', en: 'Applications' },
    profileViews: { ar: 'مشاهدات الملف', en: 'Profile Views' },
    noApps: { ar: {title:'لا توجد طلبات',desc:'لم تقدم على أي وظيفة بعد'}, en: {title:'No Applications',desc:'You haven\'t applied to any jobs yet'} },
    statusLabels: { ar: {pending:'قيد الانتظار',reviewing:'قيد المراجعة',accepted:'مقبول'}, en: {pending:'Pending',reviewing:'Reviewing',accepted:'Accepted'} },
    hiringStages: { ar: ['مراجعة الطلبات','الفرز الأولي','المقابلات','الاختبارات','العرض الوظيفي'], en: ['Application Review','Initial Screening','Interviews','Assessment','Job Offer'] },
    applicants: { ar: 'متقدم لهذه الوظيفة', en: 'applicants for this position' },
    applyForm: { ar: {title:'التقديم على الوظيفة',name:'الاسم الكامل',email:'البريد الإلكتروني',phone:'رقم الجوال',resume:'السيرة الذاتية',cover:'رسالة تعريفية (اختياري)',submit:'إرسال الطلب',success:'تم إرسال طلبك بنجاح!',uploadCV:'رفع السيرة الذاتية (PDF)'}, en: {title:'Apply for Job',name:'Full Name',email:'Email Address',phone:'Phone Number',resume:'Resume/CV',cover:'Cover Letter (Optional)',submit:'Submit Application',success:'Your application was submitted successfully!',uploadCV:'Upload CV (PDF)'} }
};

// Use Western numerals (0-9) always per user request
function toArabicNum(n) { return n != null ? n.toLocaleString('en-US') : '-'; }
function formatSalary(v) { return v ? v.toLocaleString('en-US') : '-'; }
function getApplicantCount(jobId) { return 15 + (jobId * 17 + 23) % 180; }
function getHiringStage(jobId) { return (jobId * 13 + 7) % 5; }

function setLanguage(lang) {
    currentLang = lang;
    document.body.classList.toggle('en', lang==='en');
    document.documentElement.lang = lang;
    document.documentElement.dir = lang==='ar'?'rtl':'ltr';
    document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.textContent.includes(lang==='ar'?'عربي':'EN')));
    document.querySelectorAll('[data-ar]').forEach(el => el.textContent = el.getAttribute(`data-${lang}`));
    document.querySelectorAll('[data-ar-placeholder]').forEach(el => el.placeholder = el.getAttribute(`data-${lang}-placeholder`));
    renderFilters();
    renderLocationSelect();
    renderSortSelect();
    applyFilters();
    renderCompanies();
    renderApplications();
    renderProfile();
    // Homepage content
    renderFeaturedJobs();
    renderCategories();
    renderFeaturedCompanies();
}

// Jobs Data
const jobsData = [
    {id:1,title:{ar:'أخصائي أمن سيبراني',en:'Senior Cybersecurity Engineer'},company:{ar:'شركة تقنية',en:'Tech Company'},companyShort:{ar:'تقنية',en:'Tech'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:22000,salaryMax:35000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'it',postedDays:1,linkedinUrl:'https://www.linkedin.com/jobs/view/4333750073/',description:{ar:'مسؤول عن حماية البنية التحتية الرقمية وتطوير استراتيجيات الأمن السيبراني.',en:'Responsible for protecting digital infrastructure and developing cybersecurity strategies.'},requirements:{ar:['خبرة 3+ سنوات في الأمن السيبراني','شهادات معتمدة (CISSP, CEH)','إجادة اللغة الإنجليزية'],en:['3+ years cybersecurity experience','Certifications (CISSP, CEH)','English proficiency']},benefits:{ar:['تأمين طبي شامل','بدل سكن','مكافأة سنوية'],en:['Comprehensive health insurance','Housing allowance','Annual bonus']}},
    {id:2,title:{ar:'مدير إداري',en:'Office Administrator'},company:{ar:'شركة كنز',en:'Kanz'},companyShort:{ar:'كنز',en:'Kanz'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:10000,salaryMax:15000,jobType:'fulltime',sector:'private',experience:'entry',specialization:'hr',postedDays:2,linkedinUrl:'https://www.linkedin.com/jobs/view/4334633193/',description:{ar:'إدارة المهام الإدارية اليومية والتنسيق بين الأقسام.',en:'Manage daily administrative tasks and coordinate between departments.'},requirements:{ar:['شهادة جامعية','خبرة سنة في الإدارة','مهارات تنظيمية'],en:['University degree','1 year admin experience','Organizational skills']},benefits:{ar:['تأمين صحي','إجازات سنوية'],en:['Health insurance','Annual leave']}},
    {id:3,title:{ar:'مسؤول التحول الرقمي',en:'Digital Transformation Officer'},company:{ar:'جهة حكومية',en:'Government Entity'},companyShort:{ar:'حكومي',en:'Govt'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:25000,salaryMax:40000,jobType:'fulltime',sector:'govt',experience:'senior',specialization:'it',postedDays:3,linkedinUrl:'https://www.linkedin.com/jobs/view/4347747333/',description:{ar:'قيادة مبادرات التحول الرقمي وتطوير الخدمات الإلكترونية.',en:'Lead digital transformation initiatives and develop e-services.'},requirements:{ar:['خبرة 8+ سنوات','درجة الماجستير مفضلة','خبرة في القطاع الحكومي'],en:['8+ years experience','Masters preferred','Government sector experience']},benefits:{ar:['راتب تنافسي','تطوير مهني','استقرار وظيفي'],en:['Competitive salary','Professional development','Job stability']}},
    {id:4,title:{ar:'مدير قانوني',en:'Legal Director'},company:{ar:'جهة حكومية سرية',en:'Confidential Government'},companyShort:{ar:'سري',en:'Conf'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:35000,salaryMax:50000,jobType:'fulltime',sector:'govt',experience:'senior',specialization:'legal',postedDays:2,linkedinUrl:'https://www.linkedin.com/jobs/view/4348911305/',description:{ar:'الإشراف على الشؤون القانونية وضمان الامتثال.',en:'Oversee legal affairs and ensure compliance.'},requirements:{ar:['درجة في القانون','خبرة 10+ سنوات','رخصة محاماة'],en:['Law degree','10+ years experience','Bar license']},benefits:{ar:['حزمة تنفيذية','تأمين VIP'],en:['Executive package','VIP insurance']}},
    {id:5,title:{ar:'مطور UI/UX',en:'Senior UI/UX Developer'},company:{ar:'شركة برمجيات',en:'Software Company'},companyShort:{ar:'برمجيات',en:'Software'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:18000,salaryMax:28000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'it',postedDays:4,linkedinUrl:'https://www.linkedin.com/jobs/view/4320882269/',description:{ar:'تصميم واجهات المستخدم وتحسين تجربة المستخدم.',en:'Design user interfaces and improve user experience.'},requirements:{ar:['خبرة في Figma/Sketch','معرفة HTML/CSS','محفظة أعمال'],en:['Figma/Sketch experience','HTML/CSS knowledge','Portfolio']},benefits:{ar:['عمل مرن','تدريب مستمر'],en:['Flexible work','Continuous training']}},
    {id:6,title:{ar:'محاسب',en:'Accountant'},company:{ar:'شركة كنز',en:'Kanz'},companyShort:{ar:'كنز',en:'Kanz'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:12000,salaryMax:18000,jobType:'fulltime',sector:'private',experience:'entry',specialization:'accounting',postedDays:3,linkedinUrl:'https://www.linkedin.com/jobs/view/4344758998/',description:{ar:'إدارة الحسابات المالية وإعداد التقارير.',en:'Manage financial accounts and prepare reports.'},requirements:{ar:['شهادة محاسبة','خبرة سنتين','إجادة Excel'],en:['Accounting degree','2 years experience','Excel proficiency']},benefits:{ar:['تأمين صحي','بدلات'],en:['Health insurance','Allowances']}},
    {id:7,title:{ar:'مهندس بترول',en:'Petroleum Engineer'},company:{ar:'أرامكو السعودية',en:'Saudi Aramco'},companyShort:{ar:'أرامكو',en:'Aramco'},location:{ar:'الظهران',en:'Dhahran'},salaryMin:30000,salaryMax:50000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'engineering',postedDays:5,linkedinUrl:'https://sg.linkedin.com/jobs/view/business-origination-specialist-relocation-to-saudi-arabia-at-aramco-4328036916',description:{ar:'تطوير وإدارة عمليات استخراج النفط والغاز.',en:'Develop and manage oil and gas extraction operations.'},requirements:{ar:['هندسة بترول','خبرة 5+ سنوات','إجادة الإنجليزية'],en:['Petroleum Engineering degree','5+ years experience','English fluency']},benefits:{ar:['سكن','تعليم الأبناء','تأمين شامل'],en:['Housing','Children education','Full insurance']}},
    {id:8,title:{ar:'مهندس خدمة PLC',en:'PLC Service Engineer'},company:{ar:'سيمنز',en:'Siemens'},companyShort:{ar:'سيمنز',en:'Siemens'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:15000,salaryMax:22000,jobType:'fulltime',sector:'private',experience:'entry',specialization:'engineering',postedDays:4,linkedinUrl:'https://sa.linkedin.com/jobs/view/plc-service-engineer-great-opportunity-for-saudi-nationals-at-siemens-4323593515',description:{ar:'صيانة وبرمجة أنظمة PLC الصناعية.',en:'Maintain and program industrial PLC systems.'},requirements:{ar:['هندسة كهربائية','معرفة بـ Siemens PLC','سعودي الجنسية'],en:['Electrical Engineering','Siemens PLC knowledge','Saudi national']},benefits:{ar:['تدريب دولي','مسار وظيفي'],en:['International training','Career path']}},
    {id:9,title:{ar:'مدير تسويق قنوات',en:'Channel Marketing Manager'},company:{ar:'Nothing',en:'Nothing'},companyShort:{ar:'Nothing',en:'Nothing'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:20000,salaryMax:30000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'marketing',postedDays:6,linkedinUrl:'https://www.linkedin.com/jobs/view/4305324570/',description:{ar:'إدارة استراتيجيات التسويق عبر القنوات المختلفة.',en:'Manage marketing strategies across various channels.'},requirements:{ar:['خبرة 5+ سنوات في التسويق','إدارة فريق','تحليل البيانات'],en:['5+ years marketing experience','Team management','Data analysis']},benefits:{ar:['منتجات مجانية','بيئة عمل إبداعية'],en:['Free products','Creative environment']}},
    {id:10,title:{ar:'مدير مالي',en:'Corporate Finance Manager'},company:{ar:'RSM السعودية',en:'RSM Saudi Arabia'},companyShort:{ar:'RSM',en:'RSM'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:28000,salaryMax:40000,jobType:'fulltime',sector:'private',experience:'senior',specialization:'accounting',postedDays:3,linkedinUrl:'https://sa.linkedin.com/jobs/view/corporate-finance-manager-at-rsm-saudi-arabia-4303513211',description:{ar:'إدارة العمليات المالية والتخطيط الاستراتيجي.',en:'Manage financial operations and strategic planning.'},requirements:{ar:['CPA/CFA','خبرة 8+ سنوات','قيادة فرق'],en:['CPA/CFA','8+ years experience','Team leadership']},benefits:{ar:['مكافآت أداء','تطوير مهني'],en:['Performance bonuses','Professional development']}},
    {id:11,title:{ar:'مهندس طبي حيوي',en:'Biomedical Engineer'},company:{ar:'مستشفى خاص',en:'Private Hospital'},companyShort:{ar:'طبي',en:'Medical'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:16000,salaryMax:24000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'medical',postedDays:7,linkedinUrl:'https://www.linkedin.com/jobs/view/3703372625',description:{ar:'صيانة وإدارة الأجهزة الطبية.',en:'Maintain and manage medical equipment.'},requirements:{ar:['هندسة طبية حيوية','خبرة 3+ سنوات','شهادات معتمدة'],en:['Biomedical Engineering','3+ years experience','Certifications']},benefits:{ar:['تأمين طبي','تدريب'],en:['Medical insurance','Training']}},
    {id:12,title:{ar:'مدير مخاطر تشغيلية',en:'Manager, Operational Risk'},company:{ar:'نيوم',en:'NEOM'},companyShort:{ar:'نيوم',en:'NEOM'},location:{ar:'تبوك',en:'Tabuk'},salaryMin:35000,salaryMax:50000,jobType:'fulltime',sector:'semi-govt',experience:'senior',specialization:'accounting',postedDays:5,linkedinUrl:'https://sa.linkedin.com/jobs/view/manager-operational-risk-at-neom-4118954640',description:{ar:'إدارة المخاطر التشغيلية لمشروع نيوم.',en:'Manage operational risks for NEOM project.'},requirements:{ar:['خبرة في إدارة المخاطر','شهادات مهنية','إجادة الإنجليزية'],en:['Risk management experience','Professional certifications','English fluency']},benefits:{ar:['حزمة استثنائية','سكن','نقل'],en:['Exceptional package','Housing','Transportation']}},
    {id:13,title:{ar:'مساق وثائق',en:'Document Controller'},company:{ar:'نيوم',en:'NEOM'},companyShort:{ar:'نيوم',en:'NEOM'},location:{ar:'تبوك',en:'Tabuk'},salaryMin:12000,salaryMax:18000,jobType:'fulltime',sector:'semi-govt',experience:'entry',specialization:'hr',postedDays:10,linkedinUrl:'https://www.linkedin.com/jobs/view/3822248368/',description:{ar:'إدارة وتنظيم الوثائق والملفات.',en:'Manage and organize documents and files.'},requirements:{ar:['خبرة في إدارة الوثائق','مهارات تنظيمية','Office'],en:['Document management experience','Organizational skills','Office']},benefits:{ar:['سكن','بدلات'],en:['Housing','Allowances']}},
    {id:14,title:{ar:'مهندس برمجيات',en:'Software Engineer'},company:{ar:'وزارة الاتصالات',en:'Ministry of Communications'},companyShort:{ar:'الاتصالات',en:'MCIT'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:18000,salaryMax:28000,jobType:'fulltime',sector:'govt',experience:'mid',specialization:'it',postedDays:2,description:{ar:'تطوير الأنظمة الحكومية الرقمية.',en:'Develop government digital systems.'},requirements:{ar:['هندسة حاسب','خبرة 4+ سنوات','Java/Python'],en:['Computer Engineering','4+ years experience','Java/Python']},benefits:{ar:['استقرار وظيفي','تدريب'],en:['Job stability','Training']}},
    {id:15,title:{ar:'طبيب أسنان',en:'Dentist'},company:{ar:'وزارة الصحة',en:'Ministry of Health'},companyShort:{ar:'الصحة',en:'MOH'},location:{ar:'جدة',en:'Jeddah'},salaryMin:20000,salaryMax:30000,jobType:'fulltime',sector:'govt',experience:'entry',specialization:'medical',postedDays:3,description:{ar:'تقديم خدمات طب الأسنان.',en:'Provide dental services.'},requirements:{ar:['بكالوريوس طب أسنان','ترخيص مزاولة','سعودي'],en:['Dental degree','Practice license','Saudi national']},benefits:{ar:['تأمين','بدلات','تدريب'],en:['Insurance','Allowances','Training']}},
    {id:16,title:{ar:'معلم رياضيات',en:'Math Teacher'},company:{ar:'وزارة التعليم',en:'Ministry of Education'},companyShort:{ar:'التعليم',en:'MOE'},location:{ar:'مكة المكرمة',en:'Makkah'},salaryMin:10000,salaryMax:14000,jobType:'fulltime',sector:'govt',experience:'fresh',specialization:'education',postedDays:5,description:{ar:'تدريس الرياضيات للمرحلة الثانوية.',en:'Teach mathematics for high school.'},requirements:{ar:['بكالوريوس رياضيات','رخصة معلم'],en:['Math degree','Teaching license']},benefits:{ar:['إجازات صيفية','استقرار'],en:['Summer vacations','Stability']}},
    {id:17,title:{ar:'محلل بيانات',en:'Data Analyst'},company:{ar:'صندوق هدف',en:'HRDF (Hadaf)'},companyShort:{ar:'هدف',en:'HRDF'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:16000,salaryMax:24000,jobType:'fulltime',sector:'semi-govt',experience:'mid',specialization:'it',postedDays:2,description:{ar:'تحليل بيانات سوق العمل.',en:'Analyze labor market data.'},requirements:{ar:['خبرة في Python/R','SQL','تحليل إحصائي'],en:['Python/R experience','SQL','Statistical analysis']},benefits:{ar:['تدريب','مرونة'],en:['Training','Flexibility']}},
    {id:18,title:{ar:'مدير تسويق رقمي',en:'Digital Marketing Manager'},company:{ar:'STC',en:'STC'},companyShort:{ar:'STC',en:'STC'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:22000,salaryMax:32000,jobType:'fulltime',sector:'private',experience:'senior',specialization:'marketing',postedDays:1,description:{ar:'قيادة استراتيجية التسويق الرقمي.',en:'Lead digital marketing strategy.'},requirements:{ar:['خبرة 6+ سنوات','إدارة حملات','تحليلات'],en:['6+ years experience','Campaign management','Analytics']},benefits:{ar:['خصومات','تأمين شامل'],en:['Discounts','Full insurance']}},
    {id:19,title:{ar:'مهندس كيميائي',en:'Chemical Engineer'},company:{ar:'سابك',en:'SABIC'},companyShort:{ar:'سابك',en:'SABIC'},location:{ar:'الجبيل',en:'Jubail'},salaryMin:18000,salaryMax:26000,jobType:'fulltime',sector:'private',experience:'entry',specialization:'engineering',postedDays:5,description:{ar:'تشغيل العمليات الكيميائية.',en:'Operate chemical processes.'},requirements:{ar:['هندسة كيميائية','معرفة بالسلامة'],en:['Chemical Engineering','Safety knowledge']},benefits:{ar:['سكن','نقل','تأمين'],en:['Housing','Transport','Insurance']}},
    {id:20,title:{ar:'محلل مالي',en:'Financial Analyst'},company:{ar:'مصرف الراجحي',en:'Al Rajhi Bank'},companyShort:{ar:'الراجحي',en:'Rajhi'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:18000,salaryMax:28000,jobType:'fulltime',sector:'private',experience:'mid',specialization:'accounting',postedDays:2,description:{ar:'تحليل البيانات المالية.',en:'Analyze financial data.'},requirements:{ar:['مالية/محاسبة','خبرة 3+ سنوات','Excel متقدم'],en:['Finance/Accounting','3+ years experience','Advanced Excel']},benefits:{ar:['تمويل سكني','تأمين'],en:['Housing loan','Insurance']}},
    {id:21,title:{ar:'صيدلي',en:'Pharmacist'},company:{ar:'صيدليات النهدي',en:'Nahdi Pharmacy'},companyShort:{ar:'النهدي',en:'Nahdi'},location:{ar:'جدة',en:'Jeddah'},salaryMin:12000,salaryMax:16000,jobType:'fulltime',sector:'private',experience:'fresh',specialization:'medical',postedDays:1,description:{ar:'صرف الأدوية وتقديم الاستشارات.',en:'Dispense medications and provide consultations.'},requirements:{ar:['بكالوريوس صيدلة','ترخيص'],en:['Pharmacy degree','License']},benefits:{ar:['تأمين','خصومات'],en:['Insurance','Discounts']}},
    {id:22,title:{ar:'مطور ويب',en:'Web Developer'},company:{ar:'شركة حلول',en:'Hulul Company'},companyShort:{ar:'حلول',en:'Hulul'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:14000,salaryMax:20000,jobType:'remote',sector:'private',experience:'entry',specialization:'it',postedDays:1,description:{ar:'تطوير مواقع وتطبيقات ويب.',en:'Develop websites and web applications.'},requirements:{ar:['React/Vue','Node.js','Git'],en:['React/Vue','Node.js','Git']},benefits:{ar:['عمل عن بعد','مرونة'],en:['Remote work','Flexibility']}},
    {id:23,title:{ar:'مهندس ذكاء اصطناعي',en:'AI Engineer'},company:{ar:'سدايا',en:'SDAIA'},companyShort:{ar:'سدايا',en:'SDAIA'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:25000,salaryMax:40000,jobType:'fulltime',sector:'semi-govt',experience:'mid',specialization:'it',postedDays:2,description:{ar:'تطوير حلول الذكاء الاصطناعي.',en:'Develop AI solutions.'},requirements:{ar:['ماجستير في AI/ML','Python/TensorFlow','خبرة 3+ سنوات'],en:['Masters in AI/ML','Python/TensorFlow','3+ years experience']},benefits:{ar:['راتب تنافسي','مشاريع رائدة'],en:['Competitive salary','Leading projects']}},
    {id:24,title:{ar:'كاتب محتوى',en:'Content Writer'},company:{ar:'نون',en:'Noon'},companyShort:{ar:'نون',en:'Noon'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:10000,salaryMax:15000,jobType:'remote',sector:'private',experience:'entry',specialization:'marketing',postedDays:1,description:{ar:'كتابة المحتوى التسويقي.',en:'Write marketing content.'},requirements:{ar:['إجادة العربية والإنجليزية','كتابة إبداعية'],en:['Arabic and English fluency','Creative writing']},benefits:{ar:['عمل عن بعد','خصومات'],en:['Remote work','Discounts']}},
    {id:25,title:{ar:'مدير موارد بشرية',en:'HR Manager'},company:{ar:'المراعي',en:'Almarai'},companyShort:{ar:'المراعي',en:'Almarai'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:25000,salaryMax:35000,jobType:'fulltime',sector:'private',experience:'senior',specialization:'hr',postedDays:4,description:{ar:'إدارة شؤون الموظفين.',en:'Manage HR operations.'},requirements:{ar:['خبرة 8+ سنوات HR','قيادة فرق'],en:['8+ years HR experience','Team leadership']},benefits:{ar:['تأمين شامل','منتجات مجانية'],en:['Full insurance','Free products']}},
    // Real jobs from Jadarat
    {id:26,title:{ar:'استشاري جلدية',en:'Dermatology Consultant'},company:{ar:'مستشفى قوى الأمن بالدمام',en:'Security Forces Hospital Dammam'},companyShort:{ar:'قوى الأمن',en:'SFH'},location:{ar:'الدمام',en:'Dammam'},salaryMin:null,salaryMax:null,jobType:'fulltime',sector:'semi-govt',experience:'senior',specialization:'medical',postedDays:1,description:{ar:'دراسة وتشخيص الحالة المرضية فيما يخص الأمراض الجلدية، ووضع الخطة العلاجية ومتابعة تنفيذها، وتقييم تطور الحالة المرضية وفاعلية الخطة العلاجية، وإعداد الوثائق والتقارير الطبية المتعلقة بالمريض وحفظها.',en:'Study and diagnose skin diseases, develop treatment plans, monitor progress, evaluate treatment effectiveness, and prepare medical documents and reports.'},requirements:{ar:['زمالة في طب الأمراض الجلدية','ترخيص الهيئة السعودية للتخصصات الصحية','خبرة 5+ سنوات','إجادة العربية والإنجليزية'],en:['Fellowship in Dermatology','Saudi Health Specialties Authority license','5+ years experience','Arabic & English fluency']},benefits:{ar:['تأمين طبي','بدلات','استقرار وظيفي'],en:['Medical insurance','Allowances','Job stability']}},
    {id:27,title:{ar:'مدير تنفيذي التحول الرقمي',en:'Digital Transformation Executive Director'},company:{ar:'هيئة السياحة',en:'Tourism Authority'},companyShort:{ar:'السياحة',en:'Tourism'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:40000,salaryMax:60000,jobType:'fulltime',sector:'semi-govt',experience:'senior',specialization:'it',postedDays:1,description:{ar:'قيادة وتوجيه مبادرات التحول الرقمي في الهيئة، من خلال تطوير وتنفيذ الاستراتيجية الرقمية، وتبني الحلول والتقنيات الرقمية المبتكرة، وتحسين كفاءة العمليات والخدمات.',en:'Lead digital transformation initiatives, develop and implement digital strategy, adopt innovative solutions, and improve operational efficiency.'},requirements:{ar:['خبرة 10+ سنوات في التحول الرقمي','قيادة الفرق التقنية','شهادات مهنية معتمدة'],en:['10+ years digital transformation experience','Technical team leadership','Professional certifications']},benefits:{ar:['حزمة تنافسية','تأمين شامل','بدلات'],en:['Competitive package','Full insurance','Allowances']}},
    {id:28,title:{ar:'مدير تنفيذي تخطيط وتطوير عمليات السياحة الساحلية',en:'Coastal Tourism Operations Executive Director'},company:{ar:'هيئة السياحة',en:'Tourism Authority'},companyShort:{ar:'السياحة',en:'Tourism'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:45000,salaryMax:65000,jobType:'fulltime',sector:'semi-govt',experience:'senior',specialization:'hr',postedDays:1,description:{ar:'قيادة تخطيط وتطوير وتحسين عمليات السياحة الساحلية في الهيئة، من خلال تحليل الأعمال والخدمات والمشاريع، وترجمة المتطلبات التشغيلية إلى نماذج تشغيلية موحدة.',en:'Lead planning and development of coastal tourism operations, analyze business processes, and translate operational requirements into unified models.'},requirements:{ar:['خبرة 10+ سنوات في السياحة أو التطوير','درجة الماجستير مفضلة','إجادة الإنجليزية'],en:['10+ years tourism/development experience','Masters degree preferred','English fluency']},benefits:{ar:['حزمة تنفيذية','سكن','نقل'],en:['Executive package','Housing','Transportation']}},
    {id:29,title:{ar:'مدير تنفيذي المقر الرئيسي وخدمات الفروع',en:'HQ & Branch Services Executive Director'},company:{ar:'هيئة السياحة',en:'Tourism Authority'},companyShort:{ar:'السياحة',en:'Tourism'},location:{ar:'الرياض',en:'Riyadh'},salaryMin:42000,salaryMax:58000,jobType:'fulltime',sector:'semi-govt',experience:'senior',specialization:'hr',postedDays:1,description:{ar:'قيادة وتطوير منظومة إدارة المقر الرئيسي وخدمات الفروع التابعة للهيئة، من خلال التخطيط الاستراتيجي وإدارة المرافق والأصول وضمان التشغيل الآمن.',en:'Lead and develop headquarters and branch management, strategic planning, facilities management, and ensure safe operations.'},requirements:{ar:['خبرة 10+ سنوات في إدارة المرافق','قيادة الفرق','شهادات مهنية'],en:['10+ years facilities management','Team leadership','Professional certifications']},benefits:{ar:['حزمة تنفيذية','تأمين VIP','بدلات'],en:['Executive package','VIP insurance','Allowances']}}
];

// Companies Data
const companiesData = [
    {name:{ar:'أرامكو السعودية',en:'Saudi Aramco'},sector:'private',jobs:75,logo:'أرامكو'},
    {name:{ar:'سابك',en:'SABIC'},sector:'private',jobs:45,logo:'سابك'},
    {name:{ar:'STC',en:'STC'},sector:'private',jobs:38,logo:'STC'},
    {name:{ar:'نيوم',en:'NEOM'},sector:'semi-govt',jobs:120,logo:'نيوم'},
    {name:{ar:'وزارة الصحة',en:'Ministry of Health'},sector:'govt',jobs:890,logo:'الصحة'},
    {name:{ar:'وزارة التعليم',en:'Ministry of Education'},sector:'govt',jobs:1200,logo:'التعليم'},
    {name:{ar:'مصرف الراجحي',en:'Al Rajhi Bank'},sector:'private',jobs:56,logo:'الراجحي'},
    {name:{ar:'سدايا',en:'SDAIA'},sector:'semi-govt',jobs:34,logo:'سدايا'},
    {name:{ar:'المراعي',en:'Almarai'},sector:'private',jobs:28,logo:'المراعي'},
    {name:{ar:'موبايلي',en:'Mobily'},sector:'private',jobs:42,logo:'موبايلي'},
    {name:{ar:'صندوق هدف',en:'HRDF'},sector:'semi-govt',jobs:18,logo:'هدف'},
    {name:{ar:'البنك الأهلي',en:'SNB'},sector:'private',jobs:67,logo:'الأهلي'},
    {name:{ar:'مستشفى قوى الأمن بالدمام',en:'Security Forces Hospital Dammam'},sector:'semi-govt',jobs:15,logo:'قوى الأمن'},
    {name:{ar:'هيئة السياحة',en:'Tourism Authority'},sector:'semi-govt',jobs:25,logo:'السياحة'}
];

// State
let activeFilters = {keyword:'',location:'',jobTypes:[],sectors:[],experience:[],postedDate:null,specializations:[],salaryMin:3000,salaryMax:50000};
let currentPage = 1;
const jobsPerPage = 12;
let savedJobs = JSON.parse(sessionStorage.getItem('savedJobs') || '[]');

// Company Logos as inline SVG data URLs (always work, no external dependencies)
const companyLogos = {
    // Generic companies used in job listings
    'شركة تقنية': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%230d9488' width='100' height='100' rx='12'/%3E%3Cpath d='M30 35h40v30H30z' fill='none' stroke='white' stroke-width='3'/%3E%3Cpath d='M35 45h10M35 50h15M35 55h8' stroke='white' stroke-width='2' stroke-linecap='round'/%3E%3Ccircle cx='60' cy='50' r='8' fill='white' fill-opacity='0.3'/%3E%3C/svg%3E",
    'Tech Company': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%230d9488' width='100' height='100' rx='12'/%3E%3Cpath d='M30 35h40v30H30z' fill='none' stroke='white' stroke-width='3'/%3E%3Cpath d='M35 45h10M35 50h15M35 55h8' stroke='white' stroke-width='2' stroke-linecap='round'/%3E%3Ccircle cx='60' cy='50' r='8' fill='white' fill-opacity='0.3'/%3E%3C/svg%3E",
    'شركة كنز': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23b45309' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='28' font-weight='bold' fill='%23fcd34d' text-anchor='middle'%3EKANZ%3C/text%3E%3C/svg%3E",
    'Kanz': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23b45309' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='28' font-weight='bold' fill='%23fcd34d' text-anchor='middle'%3EKANZ%3C/text%3E%3C/svg%3E",
    'جهة حكومية': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23065f46' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25L25 40v5h50v-5L50 25z' fill='white'/%3E%3Crect x='30' y='48' width='10' height='22' fill='white'/%3E%3Crect x='45' y='48' width='10' height='22' fill='white'/%3E%3Crect x='60' y='48' width='10' height='22' fill='white'/%3E%3Crect x='25' y='70' width='50' height='5' fill='white'/%3E%3C/svg%3E",
    'Government Entity': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23065f46' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25L25 40v5h50v-5L50 25z' fill='white'/%3E%3Crect x='30' y='48' width='10' height='22' fill='white'/%3E%3Crect x='45' y='48' width='10' height='22' fill='white'/%3E%3Crect x='60' y='48' width='10' height='22' fill='white'/%3E%3Crect x='25' y='70' width='50' height='5' fill='white'/%3E%3C/svg%3E",
    'جهة حكومية سرية': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%231e3a5f' width='100' height='100' rx='12'/%3E%3Ccircle cx='50' cy='45' r='15' fill='none' stroke='white' stroke-width='3'/%3E%3Crect x='45' y='55' width='10' height='20' rx='2' fill='white'/%3E%3Ccircle cx='50' cy='45' r='5' fill='white'/%3E%3C/svg%3E",
    'Confidential Government': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%231e3a5f' width='100' height='100' rx='12'/%3E%3Ccircle cx='50' cy='45' r='15' fill='none' stroke='white' stroke-width='3'/%3E%3Crect x='45' y='55' width='10' height='20' rx='2' fill='white'/%3E%3Ccircle cx='50' cy='45' r='5' fill='white'/%3E%3C/svg%3E",
    'شركة برمجيات': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%237c3aed' width='100' height='100' rx='12'/%3E%3Cpath d='M35 40l-10 10 10 10M65 40l10 10-10 10' stroke='white' stroke-width='4' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M55 30L45 70' stroke='white' stroke-width='4' stroke-linecap='round'/%3E%3C/svg%3E",
    'Software Company': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%237c3aed' width='100' height='100' rx='12'/%3E%3Cpath d='M35 40l-10 10 10 10M65 40l10 10-10 10' stroke='white' stroke-width='4' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M55 30L45 70' stroke='white' stroke-width='4' stroke-linecap='round'/%3E%3C/svg%3E",
    // Aramco - Real logo
    'أرامكو السعودية': "https://companieslogo.com/img/orig/2222.SR_BIG-932b4410.png?t=1720244490",
    'Saudi Aramco': "https://companieslogo.com/img/orig/2222.SR_BIG-932b4410.png?t=1720244490",
    // SABIC - Real logo
    'سابك': "https://companieslogo.com/img/orig/2010.SR-73af2558.png?t=1720244490",
    'SABIC': "https://companieslogo.com/img/orig/2010.SR-73af2558.png?t=1720244490",
    // STC - Real logo
    'STC': "https://companieslogo.com/img/orig/7010.SR-38ef776f.png?t=1751524154",
    // NEOM - Real logo
    'نيوم': "https://images.seeklogo.com/logo-png/35/1/neom-logo-png_seeklogo-358578.png",
    'NEOM': "https://images.seeklogo.com/logo-png/35/1/neom-logo-png_seeklogo-358578.png",
    // Ministry of Health - Green
    'وزارة الصحة': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23006B3F' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L50 75 M35 50 L65 50' stroke='white' stroke-width='8' stroke-linecap='round'/%3E%3C/svg%3E",
    'Ministry of Health': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23006B3F' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L50 75 M35 50 L65 50' stroke='white' stroke-width='8' stroke-linecap='round'/%3E%3C/svg%3E",
    // Ministry of Education - Blue/Green
    'وزارة التعليم': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%230D9488' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L75 40 L50 55 L25 40 Z' fill='white'/%3E%3Crect x='35' y='45' width='30' height='25' fill='white' rx='2'/%3E%3C/svg%3E",
    'Ministry of Education': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%230D9488' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L75 40 L50 55 L25 40 Z' fill='white'/%3E%3Crect x='35' y='45' width='30' height='25' fill='white' rx='2'/%3E%3C/svg%3E",
    // Al Rajhi Bank - Real logo
    'مصرف الراجحي': "https://companieslogo.com/img/orig/1120.SR_BIG-b2f7c182.png?t=1720244490",
    'Al Rajhi Bank': "https://companieslogo.com/img/orig/1120.SR_BIG-b2f7c182.png?t=1720244490",
    // SDAIA - Purple/Teal
    'سدايا': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='sd1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%235B2C6F'/%3E%3Cstop offset='100%25' stop-color='%230D9488'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23sd1)' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='24' font-weight='bold' fill='white' text-anchor='middle'%3ESDAIA%3C/text%3E%3C/svg%3E",
    'SDAIA': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='sd2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%235B2C6F'/%3E%3Cstop offset='100%25' stop-color='%230D9488'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23sd2)' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='24' font-weight='bold' fill='white' text-anchor='middle'%3ESDAIA%3C/text%3E%3C/svg%3E",
    // Almarai - Real logo
    'المراعي': "https://companieslogo.com/img/orig/2280.SR_BIG-328156cd.png?t=1746712284",
    'Almarai': "https://companieslogo.com/img/orig/2280.SR_BIG-328156cd.png?t=1746712284",
    // Mobily - Purple/Pink
    'موبايلي': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='m1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236B0F6B'/%3E%3Cstop offset='100%25' stop-color='%23C2185B'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23m1)' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='22' font-weight='bold' fill='white' text-anchor='middle'%3EMobily%3C/text%3E%3C/svg%3E",
    'Mobily': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='m2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236B0F6B'/%3E%3Cstop offset='100%25' stop-color='%23C2185B'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23m2)' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='22' font-weight='bold' fill='white' text-anchor='middle'%3EMobily%3C/text%3E%3C/svg%3E",
    // HRDF - Green
    'صندوق هدف': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23008C45' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='55' font-family='Arial,sans-serif' font-size='22' font-weight='bold' fill='white' text-anchor='middle'%3EHRDF%3C/text%3E%3Ctext x='50' y='72' font-family='Arial,sans-serif' font-size='14' fill='%23B5E3C4' text-anchor='middle'%3Eهدف%3C/text%3E%3C/svg%3E",
    'HRDF': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23008C45' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='55' font-family='Arial,sans-serif' font-size='22' font-weight='bold' fill='white' text-anchor='middle'%3EHRDF%3C/text%3E%3Ctext x='50' y='72' font-family='Arial,sans-serif' font-size='14' fill='%23B5E3C4' text-anchor='middle'%3Eهدف%3C/text%3E%3C/svg%3E",
    // SNB - Dark Blue/Gold
    'البنك الأهلي': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%231A1F71' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='32' font-weight='bold' fill='%23C9A227' text-anchor='middle'%3ESNB%3C/text%3E%3C/svg%3E",
    'SNB': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%231A1F71' width='100' height='100' rx='12'/%3E%3Ctext x='50' y='58' font-family='Arial,sans-serif' font-size='32' font-weight='bold' fill='%23C9A227' text-anchor='middle'%3ESNB%3C/text%3E%3C/svg%3E",
    // Security Forces Hospital - Teal/Medical
    'مستشفى قوى الأمن بالدمام': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='sfh1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23016664'/%3E%3Cstop offset='100%25' stop-color='%230D9488'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23sfh1)' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L50 75 M35 50 L65 50' stroke='white' stroke-width='8' stroke-linecap='round'/%3E%3Cpath d='M30 30 L40 25 L40 35 Z' fill='%23CFB485'/%3E%3C/svg%3E",
    'Security Forces Hospital Dammam': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='sfh2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23016664'/%3E%3Cstop offset='100%25' stop-color='%230D9488'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23sfh2)' width='100' height='100' rx='12'/%3E%3Cpath d='M50 25 L50 75 M35 50 L65 50' stroke='white' stroke-width='8' stroke-linecap='round'/%3E%3Cpath d='M30 30 L40 25 L40 35 Z' fill='%23CFB485'/%3E%3C/svg%3E",
    // Tourism Authority - Blue/Palm
    'هيئة السياحة': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='ta1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23016664'/%3E%3Cstop offset='100%25' stop-color='%23134e4a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23ta1)' width='100' height='100' rx='12'/%3E%3Cpath d='M50 75 L50 45 M50 45 Q35 35 30 25 M50 45 Q65 35 70 25 M50 45 Q40 30 25 30 M50 45 Q60 30 75 30 M50 45 Q45 25 50 15 M50 45 Q55 25 50 15' stroke='%23CFB485' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3C/svg%3E",
    'Tourism Authority': "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='ta2' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23016664'/%3E%3Cstop offset='100%25' stop-color='%23134e4a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23ta2)' width='100' height='100' rx='12'/%3E%3Cpath d='M50 75 L50 45 M50 45 Q35 35 30 25 M50 45 Q65 35 70 25 M50 45 Q40 30 25 30 M50 45 Q60 30 75 30 M50 45 Q45 25 50 15 M50 45 Q55 25 50 15' stroke='%23CFB485' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3C/svg%3E",
    // Siemens - Real logo
    'سيمنز': "https://companieslogo.com/img/orig/SIE.DE_BIG-8513f49c.png?t=1720244493",
    'Siemens': "https://companieslogo.com/img/orig/SIE.DE_BIG-8513f49c.png?t=1720244493"
};

// Category icons
const categoryIcons = {
    it: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>',
    engineering: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>',
    accounting: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>',
    hr: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>',
    marketing: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/><polyline points="3.27,6.96 12,12.01 20.73,6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>',
    medical: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>',
    legal: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',
    education: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>'
};

// Category translations
const categoryNames = {
    ar: {
        it: 'تقنية المعلومات',
        engineering: 'الهندسة',
        accounting: 'المالية والمحاسبة',
        hr: 'الموارد البشرية',
        marketing: 'التسويق والمبيعات',
        medical: 'الطب والصحة',
        legal: 'القانون',
        education: 'التعليم'
    },
    en: {
        it: 'Information Technology',
        engineering: 'Engineering',
        accounting: 'Finance & Accounting',
        hr: 'Human Resources',
        marketing: 'Marketing & Sales',
        medical: 'Healthcare',
        legal: 'Legal',
        education: 'Education'
    }
};

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    renderFilters();
    renderLocationSelect();
    renderSortSelect();
    setupSalarySlider();
    setupSearchListeners();
    applyFilters();
    renderCompanies();
    renderApplications();
    renderProfile();
    // Homepage rendering
    renderFeaturedJobs();
    renderCategories();
    renderFeaturedCompanies();
});

// Homepage Functions
function searchFromHome() {
    const keyword = document.getElementById('homeSearchKeyword').value;
    if(keyword) {
        document.getElementById('searchKeyword').value = keyword;
        activeFilters.keyword = keyword;
    }
    showPage('jobs');
    applyFilters();
}

function renderFeaturedJobs() {
    const featuredJobs = jobsData.slice(0, 6);
    const grid = document.getElementById('featuredJobsGrid');
    if(!grid) return;

    grid.innerHTML = featuredJobs.map((job, index) => {
        const logoUrl = companyLogos[job.company[currentLang]] || companyLogos[job.company.ar];
        return `
        <div class="job-card" onclick="showJobModal(jobsData[${jobsData.indexOf(job)}])" style="animation-delay: ${index * 0.1}s; opacity: 1;">
            <div class="job-card-header">
                <div class="company-logo ${job.sector}">
                    ${logoUrl ? `<img src="${logoUrl}" alt="${job.company[currentLang]}" onerror="this.style.display='none';this.parentElement.innerHTML='${job.companyShort[currentLang].replace(/'/g, "&apos;")}'" style="width:100%;height:100%;object-fit:contain;padding:8px;">` : job.companyShort[currentLang]}
                </div>
                <div class="job-card-info">
                    <h3 class="job-title">${job.title[currentLang]}</h3>
                    <p class="company-name">${job.company[currentLang]}</p>
                </div>
            </div>
            <div class="job-meta">
                <span class="job-meta-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>${job.location[currentLang]}</span>
                <span class="job-meta-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>${translations.typeLabels[currentLang][job.jobType]}</span>
            </div>
            <div class="job-tags">
                <span class="job-tag type-${job.jobType}">${translations.typeLabels[currentLang][job.jobType]}</span>
                <span class="job-tag sector-${job.sector}">${translations.sectorLabels[currentLang][job.sector]}</span>
            </div>
            <div class="job-card-applicants">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
                <span><strong>${getApplicantCount(job.id)}</strong> ${translations.applicants[currentLang]}</span>
            </div>
            <div class="job-card-stages">
                <div class="job-card-stages-title">${currentLang === 'ar' ? 'مراحل التوظيف' : 'Hiring Process'}</div>
                <div class="mini-stages">
                    ${translations.hiringStages[currentLang].map((stage, i) => `
                        <div class="mini-stage ${i < getHiringStage(job.id) ? 'completed' : i === getHiringStage(job.id) ? 'active' : ''}">
                            <div class="mini-stage-dot">${i < getHiringStage(job.id) ? '✓' : toArabicNum(i + 1)}</div>
                            <span class="mini-stage-label">${stage}</span>
                        </div>
                        ${i < 4 ? `<div class="mini-stage-connector ${i < getHiringStage(job.id) ? 'completed' : ''}"></div>` : ''}
                    `).join('')}
                </div>
            </div>
            <div class="job-card-footer">
                <div class="job-salary">${toArabicNum(job.salaryMin)} - ${toArabicNum(job.salaryMax)} <span class="sar-symbol"></span></div>
            </div>
        </div>
    `}).join('');
}

function renderCategories() {
    const grid = document.getElementById('categoriesGrid');
    if(!grid) return;

    const categories = Object.keys(categoryNames.ar);
    grid.innerHTML = categories.map(catId => {
        const count = jobsData.filter(j => j.specialization === catId).length;
        return `
        <div class="category-card" onclick="filterByCategory('${catId}')">
            <div class="category-icon">${categoryIcons[catId]}</div>
            <h3 class="category-name">${categoryNames[currentLang][catId]}</h3>
            <p class="category-count">${toArabicNum(count)} ${currentLang==='ar'?'وظيفة':'jobs'}</p>
        </div>
    `}).join('');
}

function filterByCategory(categoryId) {
    activeFilters.specializations = [categoryId];
    showPage('jobs');
    applyFilters();
    // Update UI to show selected filter
    document.querySelectorAll('.filter-tag').forEach(tag => {
        tag.classList.toggle('selected', tag.dataset.value === categoryId);
    });
}

function renderFeaturedCompanies() {
    const grid = document.getElementById('featuredCompaniesGrid');
    if(!grid) return;

    const topCompanies = companiesData.slice(0, 6);
    grid.innerHTML = topCompanies.map(company => {
        const logoUrl = companyLogos[company.name[currentLang]] || companyLogos[company.name.ar];
        return `
        <div class="featured-company-card" onclick="showPage('companies')">
            <div class="featured-company-logo ${logoUrl ? '' : 'text-logo'} ${company.sector}">
                ${logoUrl ? `<img src="${logoUrl}" alt="${company.name[currentLang]}" onerror="this.parentElement.classList.add('text-logo');this.parentElement.innerHTML='${company.logo}'">` : company.logo}
            </div>
            <h3 class="featured-company-name">${company.name[currentLang]}</h3>
            <p class="featured-company-jobs">${toArabicNum(company.jobs)} ${currentLang==='ar'?'وظيفة':'jobs'}</p>
        </div>
    `}).join('');
}

function showPage(page) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(`page-${page}`).classList.add('active');
    document.querySelectorAll('.nav-link').forEach(l => l.classList.toggle('active', l.dataset.page===page));
    window.scrollTo(0, 0);
}

function renderLocationSelect() {
    const select = document.getElementById('searchLocation');
    const locs = translations.locations[currentLang];
    select.innerHTML = locs.map((l,i) => `<option value="${i===0?'':l}">${l}</option>`).join('');
}

function renderSortSelect() {
    const select = document.getElementById('sortSelect');
    select.innerHTML = translations.sortOptions[currentLang].map(o => `<option value="${o.value}">${o.label}</option>`).join('');
}

function renderFilters() {
    const checkSvg = '<svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3"/></svg>';

    // Job Type and other simple filters
    ['jobTypeFilters','experienceFilters','dateFilters'].forEach(id => {
        const container = document.getElementById(id);
        let items = [];
        if(id==='jobTypeFilters') items = translations.jobTypes[currentLang];
        else if(id==='experienceFilters') items = translations.experience[currentLang];
        else if(id==='dateFilters') items = translations.postedDate[currentLang];
        const filterType = id.replace('Filters','');
        container.innerHTML = items.map(item => `
            <div class="filter-option" data-value="${item.id}" onclick="toggleFilter(this,'${filterType}','${item.id}')">
                <span class="filter-checkbox">${checkSvg}</span>
                <span class="filter-text">${item.label}</span>
            </div>
        `).join('');
    });

    // Improved Sector Filter - Card-based with subcategories (NO nested menus!)
    const sectorData = {
        ar: [
            {id:'govt', name:'القطاع الحكومي', count:890, icon:'🏛️', subtypes:[{id:'civil',label:'وظائف مدنية'},{id:'contract',label:'وظائف تعاقدية'},{id:'military',label:'وظائف عسكرية'}]},
            {id:'semi-govt', name:'شبه حكومي', count:245, icon:'🏢', subtypes:[{id:'funds',label:'الصناديق'},{id:'authorities',label:'الهيئات'},{id:'projects',label:'المشاريع الكبرى'}]},
            {id:'private', name:'القطاع الخاص', count:1850, icon:'💼', subtypes:[{id:'local',label:'شركات محلية'},{id:'multinational',label:'شركات عالمية'},{id:'startup',label:'شركات ناشئة'}]}
        ],
        en: [
            {id:'govt', name:'Government', count:890, icon:'🏛️', subtypes:[{id:'civil',label:'Civil Jobs'},{id:'contract',label:'Contractual'},{id:'military',label:'Military'}]},
            {id:'semi-govt', name:'Semi-Government', count:245, icon:'🏢', subtypes:[{id:'funds',label:'Funds'},{id:'authorities',label:'Authorities'},{id:'projects',label:'Mega Projects'}]},
            {id:'private', name:'Private Sector', count:1850, icon:'💼', subtypes:[{id:'local',label:'Local Companies'},{id:'multinational',label:'Multinational'},{id:'startup',label:'Startups'}]}
        ]
    };

    const sectorContainer = document.getElementById('sectorFilters');
    sectorContainer.innerHTML = sectorData[currentLang].map(sector => `
        <div class="sector-card ${activeFilters.sectors.includes(sector.id)?'selected':''}" data-sector="${sector.id}" onclick="toggleSectorCard(this,'${sector.id}')">
            <div class="sector-header">
                <div class="sector-icon ${sector.id}">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        ${sector.id==='govt'?'<path d="M3 21h18M3 10h18M5 6l7-3 7 3M4 10v11M20 10v11M8 14v3M12 14v3M16 14v3"/>':
                          sector.id==='semi-govt'?'<rect x="4" y="2" width="16" height="20" rx="2"/><path d="M9 22v-4h6v4M9 6h.01M15 6h.01M9 10h.01M15 10h.01M9 14h.01M15 14h.01"/>':
                          '<path d="M20 7h-9M14 17H5M17 17a3 3 0 100-6 3 3 0 000 6zM7 7a3 3 0 100-6 3 3 0 000 6z"/>'}
                    </svg>
                </div>
                <div class="sector-info">
                    <div class="sector-name">${sector.name}</div>
                    <div class="sector-count">${toArabicNum(sector.count)} ${currentLang==='ar'?'وظيفة':'jobs'}</div>
                </div>
                <div class="sector-checkbox">${checkSvg}</div>
            </div>
            <div class="sector-subtypes">
                ${sector.subtypes.map(st => `<span class="subtype-chip" data-subtype="${st.id}" onclick="event.stopPropagation();toggleSubtype(this,'${sector.id}','${st.id}')">${st.label}</span>`).join('')}
            </div>
        </div>
    `).join('');

    const specContainer = document.getElementById('specializationFilters');
    specContainer.innerHTML = translations.specializations[currentLang].map(s => `<span class="filter-tag" data-value="${s.id}" onclick="toggleSpec(this,'${s.id}')">${s.label}</span>`).join('');
}

function toggleSectorCard(el, sectorId) {
    el.classList.toggle('selected');
    const i = activeFilters.sectors.indexOf(sectorId);
    i>-1 ? activeFilters.sectors.splice(i,1) : activeFilters.sectors.push(sectorId);
    currentPage = 1; applyFilters();
}

function toggleSubtype(el, sectorId, subtypeId) {
    el.classList.toggle('selected');
    // Subtypes are visual only for now - could be extended for more granular filtering
}

function setupSalarySlider() {
    const minS = document.getElementById('salaryMinRange'), maxS = document.getElementById('salaryMaxRange');
    const minI = document.getElementById('salaryMin'), maxI = document.getElementById('salaryMax');
    const fill = document.getElementById('salarySliderFill');
    function update() {
        if(parseInt(minS.value) > parseInt(maxS.value)-2000) minS.value = parseInt(maxS.value)-2000;
        const minP = ((minS.value-3000)/47000)*100, maxP = ((maxS.value-3000)/47000)*100;
        fill.style.right = minP+'%'; fill.style.width = (maxP-minP)+'%';
        if(currentLang==='en') { fill.style.left = minP+'%'; fill.style.right = 'auto'; }
        minI.value = formatSalary(minS.value); maxI.value = formatSalary(maxS.value);
        activeFilters.salaryMin = parseInt(minS.value); activeFilters.salaryMax = parseInt(maxS.value);
    }
    minS.oninput = maxS.oninput = () => { update(); debounce(applyFilters, 300)(); };
    update();
}

let debounceTimer;
function debounce(fn, delay) { return () => { clearTimeout(debounceTimer); debounceTimer = setTimeout(fn, delay); }; }

function setupSearchListeners() {
    const kw = document.getElementById('searchKeyword'), loc = document.getElementById('searchLocation');
    kw.oninput = e => { activeFilters.keyword = e.target.value; debounce(applyFilters, 300)(); };
    kw.onkeypress = e => { if(e.key==='Enter') applyFilters(); };
    loc.onchange = e => { activeFilters.location = e.target.value; applyFilters(); };
}

function toggleFilter(el, type, value) {
    el.classList.toggle('selected');
    const arr = type==='jobType'?activeFilters.jobTypes:type==='sector'?activeFilters.sectors:type==='experience'?activeFilters.experience:null;
    if(arr) { const i = arr.indexOf(value); i>-1 ? arr.splice(i,1) : arr.push(value); }
    else if(type==='date') {
        document.querySelectorAll('#dateFilters .filter-option').forEach(e=>e.classList.remove('selected'));
        if(activeFilters.postedDate!==value) { el.classList.add('selected'); activeFilters.postedDate=value; }
        else activeFilters.postedDate = null;
    }
    currentPage = 1; applyFilters();
}

function toggleSpec(el, value) {
    el.classList.toggle('selected');
    const i = activeFilters.specializations.indexOf(value);
    i>-1 ? activeFilters.specializations.splice(i,1) : activeFilters.specializations.push(value);
    currentPage = 1; applyFilters();
}

function clearAllFilters() {
    activeFilters = {keyword:'',location:'',jobTypes:[],sectors:[],experience:[],postedDate:null,specializations:[],salaryMin:3000,salaryMax:50000};
    document.getElementById('searchKeyword').value = '';
    document.getElementById('searchLocation').value = '';
    document.querySelectorAll('.filter-option.selected, .filter-tag.selected').forEach(e=>e.classList.remove('selected'));
    document.getElementById('salaryMinRange').value = 3000;
    document.getElementById('salaryMaxRange').value = 50000;
    setupSalarySlider(); currentPage = 1; applyFilters();
}

function applyFilters() {
    let jobs = [...jobsData];
    if(activeFilters.keyword) { const kw = activeFilters.keyword.toLowerCase(); jobs = jobs.filter(j => j.title[currentLang].toLowerCase().includes(kw) || j.company[currentLang].toLowerCase().includes(kw)); }
    if(activeFilters.location) jobs = jobs.filter(j => j.location[currentLang] === activeFilters.location);
    if(activeFilters.jobTypes.length) jobs = jobs.filter(j => activeFilters.jobTypes.includes(j.jobType));
    if(activeFilters.sectors.length) jobs = jobs.filter(j => activeFilters.sectors.includes(j.sector));
    if(activeFilters.experience.length) jobs = jobs.filter(j => activeFilters.experience.includes(j.experience));
    if(activeFilters.postedDate) { const d = translations.postedDate[currentLang].find(x=>x.id===activeFilters.postedDate); if(d) jobs = jobs.filter(j => j.postedDays <= d.days); }
    if(activeFilters.specializations.length) jobs = jobs.filter(j => activeFilters.specializations.includes(j.specialization));
    // Filter jobs with salary range overlap (includes partial matches)
    jobs = jobs.filter(j => {
        if (!j.salaryMin && !j.salaryMax) return true;
        const jobMin = j.salaryMin || 0;
        const jobMax = j.salaryMax || 999999;
        return jobMin <= activeFilters.salaryMax && jobMax >= activeFilters.salaryMin;
    });
    const sort = document.getElementById('sortSelect').value;
    if(sort==='newest') jobs.sort((a,b)=>a.postedDays-b.postedDays);
    else if(sort==='salary-high') jobs.sort((a,b)=>b.salaryMax-a.salaryMax);
    else if(sort==='salary-low') jobs.sort((a,b)=>a.salaryMin-b.salaryMin);
    renderJobs(jobs);
}

function renderJobs(jobs) {
    const grid = document.getElementById('jobsGrid'), count = document.getElementById('filteredJobsCount');
    const total = Math.ceil(jobs.length/jobsPerPage);
    const paginated = jobs.slice((currentPage-1)*jobsPerPage, currentPage*jobsPerPage);
    count.textContent = toArabicNum(jobs.length);
    if(!paginated.length) {
        grid.innerHTML = `<div class="empty-state"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg><h3>${translations.noResults[currentLang].title}</h3><p>${translations.noResults[currentLang].desc}</p></div>`;
        document.getElementById('pagination').innerHTML = '';
        return;
    }
    grid.innerHTML = paginated.map((j,i) => {
        const logoUrl = companyLogos[j.company[currentLang]] || companyLogos[j.company.ar];
        return `
        <article class="job-card" style="animation-delay:${i*0.05}s" role="button" tabindex="0" onclick="openJobModal(${j.id})" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();openJobModal(${j.id})}" aria-label="${j.title[currentLang]} - ${j.company[currentLang]}">
            <button class="job-card-bookmark ${savedJobs.includes(j.id)?'saved':''}" onclick="event.stopPropagation();toggleSave(${j.id},this)" aria-label="${savedJobs.includes(j.id) ? 'Remove from saved' : 'Save job'}"><svg viewBox="0 0 24 24" stroke-width="2" aria-hidden="true"><path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/></svg></button>
            <div class="job-card-header">
                <div class="company-logo ${j.sector}">${logoUrl ? `<img src="${logoUrl}" alt="${j.company[currentLang]}" onerror="this.style.display='none';this.parentElement.innerHTML='${j.companyShort[currentLang].replace(/'/g, "&apos;")}'" style="width:100%;height:100%;object-fit:contain;padding:8px;">` : j.companyShort[currentLang]}</div>
                <div class="job-card-info"><h3 class="job-title">${j.title[currentLang]}</h3><p class="company-name">${j.company[currentLang]}</p></div>
            </div>
            <div class="job-meta">
                <span class="job-meta-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>${j.location[currentLang]}</span>
                <span class="job-meta-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>${translations.expLabels[currentLang][j.experience]}</span>
            </div>
            <div class="job-tags">
                <span class="job-tag type-${j.jobType}">${translations.typeLabels[currentLang][j.jobType]}</span>
                <span class="job-tag sector-${j.sector}">${translations.sectorLabels[currentLang][j.sector]}</span>
            </div>
            <div class="job-card-applicants">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
                <span><strong>${getApplicantCount(j.id)}</strong> ${translations.applicants[currentLang]}</span>
            </div>
            <div class="job-card-stages">
                <div class="job-card-stages-title">${currentLang === 'ar' ? 'مراحل التوظيف' : 'Hiring Process'}</div>
                <div class="mini-stages">
                    ${translations.hiringStages[currentLang].map((stage, i) => `
                        <div class="mini-stage ${i < getHiringStage(j.id) ? 'completed' : i === getHiringStage(j.id) ? 'active' : ''}">
                            <div class="mini-stage-dot">${i < getHiringStage(j.id) ? '✓' : toArabicNum(i + 1)}</div>
                            <span class="mini-stage-label">${stage}</span>
                        </div>
                        ${i < 4 ? `<div class="mini-stage-connector ${i < getHiringStage(j.id) ? 'completed' : ''}"></div>` : ''}
                    `).join('')}
                </div>
            </div>
            <div class="job-card-footer">
                <div><div class="job-salary">${formatSalary(j.salaryMin)} - ${formatSalary(j.salaryMax)} <span>${translations.currency[currentLang]}</span></div><div class="job-date">${translations.postedLabels[currentLang](j.postedDays)}</div></div>
                <button class="apply-btn" onclick="event.stopPropagation();openJobModal(${j.id})">${translations.apply[currentLang]}</button>
            </div>
        </article>
    `}).join('');
    renderPagination(total);
}

function renderPagination(total) {
    const container = document.getElementById('pagination');
    if(total<=1) { container.innerHTML = ''; return; }
    let html = `<button class="pagination-btn" onclick="changePage(${currentPage-1})" ${currentPage===1?'disabled':''}><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="${currentLang==='ar'?'M9 18l6-6-6-6':'M15 18l-6-6 6-6'}"/></svg></button>`;
    for(let i=Math.max(1,currentPage-2);i<=Math.min(total,currentPage+2);i++) html += `<button class="pagination-btn ${i===currentPage?'active':''}" onclick="changePage(${i})">${toArabicNum(i)}</button>`;
    html += `<button class="pagination-btn" onclick="changePage(${currentPage+1})" ${currentPage===total?'disabled':''}><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="${currentLang==='ar'?'M15 18l-6-6 6-6':'M9 18l6-6-6-6'}"/></svg></button>`;
    container.innerHTML = html;
}

function changePage(p) { currentPage = p; applyFilters(); document.querySelector('.jobs-section').scrollIntoView({behavior:'smooth'}); }

function toggleSave(id, btn) {
    const i = savedJobs.indexOf(id);
    i > -1 ? savedJobs.splice(i, 1) : savedJobs.push(id);
    sessionStorage.setItem('savedJobs', JSON.stringify(savedJobs));
    btn.classList.toggle('saved');
    renderProfile();
}

let currentJobForApplication = null;

function openJobModal(id) {
    const job = jobsData.find(j=>j.id===id);
    if(!job) return;
    currentJobForApplication = job;

    const applicantCount = getApplicantCount(job.id);
    const hiringStage = getHiringStage(job.id);
    const stages = translations.hiringStages[currentLang];
    const jobId = `202601${String(job.id).padStart(8, '0')}`;
    const deadlineDate = '2026-02-15';

    // Labels
    const labels = currentLang === 'ar' ? {
        jobId: 'الرقم التعريفي',
        deadline: 'تاريخ نهاية الإعلان',
        jobType: 'نوع العمل',
        salary: 'الراتب',
        positions: 'الوظائف المتاحة',
        gender: 'الجنس',
        region: 'المنطقة',
        city: 'المدينة',
        postDate: 'تاريخ النشر',
        endDate: 'تاريخ الانتهاء',
        workPeriod: 'فترة العمل',
        jobDesc: 'الوصف الوظيفي',
        duties: 'الواجبات والمهام الرئيسية',
        experience: 'الخبرة المطلوبة',
        qualifications: 'المؤهلات',
        skills: 'المهارات',
        languages: 'اللغات',
        benefits: 'المزايا',
        hiringProcess: 'مراحل التوظيف',
        notSpecified: 'غير محدد',
        positions1: '1 من 1',
        bothGenders: 'ذكور وإناث',
        morningEvening: 'صباحي/مسائي',
        yearsExp: 'سنوات خبرة',
        advanced: 'متقدم',
        preferred: 'مفضل'
    } : {
        jobId: 'Job ID',
        deadline: 'Application Deadline',
        jobType: 'Job Type',
        salary: 'Salary',
        positions: 'Available Positions',
        gender: 'Gender',
        region: 'Region',
        city: 'City',
        postDate: 'Posted Date',
        endDate: 'End Date',
        workPeriod: 'Work Period',
        jobDesc: 'Job Description',
        duties: 'Main Duties & Responsibilities',
        experience: 'Required Experience',
        qualifications: 'Qualifications',
        skills: 'Skills',
        languages: 'Languages',
        benefits: 'Benefits',
        hiringProcess: 'Hiring Process',
        notSpecified: 'Not Specified',
        positions1: '1 of 1',
        bothGenders: 'Male & Female',
        morningEvening: 'Morning/Evening',
        yearsExp: 'years experience',
        advanced: 'Advanced',
        preferred: 'Preferred'
    };

    const expYears = {fresh: 0, entry: 2, mid: 5, senior: 10}[job.experience] || 3;
    const salaryText = job.salaryMin ? `${formatSalary(job.salaryMin)} - ${formatSalary(job.salaryMax)} ${translations.currency[currentLang]}` : labels.notSpecified;

    const modalLogoUrl = companyLogos[job.company[currentLang]] || companyLogos[job.company.ar];
    document.getElementById('modalHeader').innerHTML = `
        <button class="modal-close" onclick="closeModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
        <div class="modal-header-content">
            <div class="modal-company-logo">${modalLogoUrl ? `<img src="${modalLogoUrl}" alt="${job.company[currentLang]}" onerror="this.parentElement.innerHTML='${job.companyShort[currentLang]}'">` : job.companyShort[currentLang]}</div>
            <div class="modal-header-info">
                <div class="modal-job-id">${labels.jobId}: ${jobId}</div>
                <h2 class="modal-job-title">${job.title[currentLang]}</h2>
                <p class="modal-company-name">${job.company[currentLang]}</p>
                <span class="modal-deadline"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>${labels.deadline}: ${deadlineDate}</span>
            </div>
        </div>
    `;

    document.getElementById('modalBody').innerHTML = `
        <!-- Sidebar -->
        <div class="modal-sidebar">
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div>
                <div><div class="sidebar-label">${labels.jobType}</div><div class="sidebar-value">${translations.typeLabels[currentLang][job.jobType]}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg></div>
                <div><div class="sidebar-label">${labels.salary}</div><div class="sidebar-value">${salaryText}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/></svg></div>
                <div><div class="sidebar-label">${labels.positions}</div><div class="sidebar-value">${labels.positions1}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 00-16 0"/></svg></div>
                <div><div class="sidebar-label">${labels.gender}</div><div class="sidebar-value">${labels.bothGenders}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
                <div><div class="sidebar-label">${labels.region}</div><div class="sidebar-value">${job.location[currentLang]}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg></div>
                <div><div class="sidebar-label">${labels.workPeriod}</div><div class="sidebar-value">${labels.morningEvening}</div></div>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/></svg></div>
                <div><div class="sidebar-label">${currentLang === 'ar' ? 'المتقدمون' : 'Applicants'}</div><div class="sidebar-value" style="color:var(--primary-600)">${applicantCount}</div></div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="modal-main">
            <!-- Job Description -->
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>${labels.jobDesc}</h3>
                <p>${job.description[currentLang]}</p>
            </div>

            <!-- Duties -->
            ${job.requirements ? `
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/></svg>${labels.duties}</h3>
                <ul>${job.requirements[currentLang].map(r=>`<li>${r}</li>`).join('')}</ul>
            </div>
            ` : ''}

            <!-- Experience & Info Grid -->
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>${labels.experience}</h3>
                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-card-title">${labels.experience}</div>
                        <div class="info-card-content">${expYears} ${labels.yearsExp}</div>
                    </div>
                    <div class="info-card">
                        <div class="info-card-title">${currentLang === 'ar' ? 'القطاع' : 'Sector'}</div>
                        <div class="info-card-content">${translations.sectorLabels[currentLang][job.sector]}</div>
                    </div>
                </div>
            </div>

            <!-- Benefits -->
            ${job.benefits ? `
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>${labels.benefits}</h3>
                <div class="benefits-grid">
                    ${job.benefits[currentLang].map(b => `<span class="benefit-tag"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>${b}</span>`).join('')}
                </div>
            </div>
            ` : ''}

            <!-- Languages -->
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>${labels.languages}</h3>
                <div class="lang-grid">
                    <div class="lang-item">
                        <span class="lang-flag">🇸🇦</span>
                        <div><div class="lang-name">${currentLang === 'ar' ? 'العربية' : 'Arabic'}</div><div class="lang-level">${labels.advanced} • ${labels.preferred}</div></div>
                    </div>
                    <div class="lang-item">
                        <span class="lang-flag">🇬🇧</span>
                        <div><div class="lang-name">${currentLang === 'ar' ? 'الإنجليزية' : 'English'}</div><div class="lang-level">${labels.advanced} • ${labels.preferred}</div></div>
                    </div>
                </div>
            </div>

            <!-- Hiring Stages -->
            <div class="modal-section">
                <h3 class="modal-section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>${labels.hiringProcess}</h3>
                <div class="hiring-stages-section" style="margin:0;background:white;border:1px solid var(--neutral-200);">
                    <div class="hiring-stages-track">
                        ${stages.map((stage, i) => `
                            <div class="hiring-stage ${i < hiringStage ? 'completed' : i === hiringStage ? 'active' : ''}">
                                <div class="stage-dot">${i < hiringStage ? '✓' : toArabicNum(i + 1)}</div>
                                <span class="stage-label">${stage}</span>
                            </div>
                            ${i < stages.length - 1 ? `<div class="stage-connector ${i < hiringStage ? 'completed' : ''}"></div>` : ''}
                        `).join('')}
                    </div>
                </div>
            </div>
        </div>
    `;

    document.getElementById('modalFooter').innerHTML = `
        <button class="apply-btn" onclick="openApplyForm()">${translations.apply[currentLang]}</button>
    `;

    document.getElementById('jobModal').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeModal() { document.getElementById('jobModal').classList.remove('open'); document.body.style.overflow = ''; }

// Apply Form Functions
function openApplyForm() {
    if(!currentJobForApplication) return;
    const t = translations.applyForm[currentLang];

    document.getElementById('applyFormTitle').textContent = t.title;
    document.getElementById('applyFormJob').textContent = `${currentJobForApplication.title[currentLang]} - ${currentJobForApplication.company[currentLang]}`;
    document.getElementById('labelName').textContent = t.name;
    document.getElementById('labelEmail').textContent = t.email;
    document.getElementById('labelPhone').textContent = t.phone;
    document.getElementById('labelResume').textContent = t.resume;
    document.getElementById('uploadLabel').textContent = t.uploadCV;
    document.getElementById('labelCover').textContent = t.cover;
    document.getElementById('submitBtnText').textContent = t.submit;

    // Load profile data if available
    const profile = JSON.parse(sessionStorage.getItem('profile') || '{}');
    if(profile.name) document.getElementById('appName').value = profile.name;
    if(profile.email) document.getElementById('appEmail').value = profile.email;
    if(profile.phone) document.getElementById('appPhone').value = profile.phone;

    document.getElementById('applyModal').classList.add('open');
}

function closeApplyForm() {
    document.getElementById('applyModal').classList.remove('open');
    document.getElementById('applicationForm').reset();
    document.getElementById('fileNameDisplay').style.display = 'none';
}

function showFileName(input) {
    const display = document.getElementById('fileNameDisplay');
    if(input.files.length > 0) {
        display.textContent = input.files[0].name;
        display.style.display = 'block';
    }
}

function submitApplication(e) {
    e.preventDefault();

    const app = {
        id: Date.now(),
        jobId: currentJobForApplication.id,
        jobTitle: currentJobForApplication.title[currentLang],
        company: currentJobForApplication.company[currentLang],
        name: document.getElementById('appName').value,
        email: document.getElementById('appEmail').value,
        phone: document.getElementById('appPhone').value,
        resume: document.getElementById('appResume').files[0]?.name || '',
        cover: document.getElementById('appCover').value,
        appliedAt: new Date().toISOString(),
        status: 'pending'
    };

    // Save to sessionStorage
    const apps = JSON.parse(sessionStorage.getItem('applications') || '[]');
    apps.push(app);
    sessionStorage.setItem('applications', JSON.stringify(apps));

    closeApplyForm();
    closeModal();
    showToast(translations.applyForm[currentLang].success);
    renderApplications();
}

function showToast(message) {
    const toast = document.getElementById('successToast');
    document.getElementById('toastMessage').textContent = message;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
}

// Company filter state
let currentCompanyFilter = 'all';

function renderCompanies(filterSector = currentCompanyFilter) {
    const filteredCompanies = filterSector === 'all'
        ? companiesData
        : companiesData.filter(c => c.sector === filterSector);

    document.getElementById('companiesGrid').innerHTML = filteredCompanies.map(c => {
        const logoUrl = companyLogos[c.name[currentLang]] || companyLogos[c.name.ar];
        return `
        <div class="company-card">
            <div class="company-card-logo company-logo ${c.sector}">
                ${logoUrl ? `<img src="${logoUrl}" alt="${c.name[currentLang]}" onerror="this.parentElement.innerHTML='${c.logo}'">` : c.logo}
            </div>
            <h3 class="company-card-name">${c.name[currentLang]}</h3>
            <p class="company-card-sector">${translations.sectorLabels[currentLang][c.sector]}</p>
            <p class="company-card-jobs">${toArabicNum(c.jobs)} ${currentLang==='ar'?'وظيفة':'jobs'}</p>
            <div class="company-card-actions">
                <button class="company-card-btn" onclick="viewCompanyJobs('${c.name.ar}')" data-ar="عرض الوظائف" data-en="View Jobs">${currentLang==='ar'?'عرض الوظائف':'View Jobs'}</button>
            </div>
        </div>
    `}).join('');

    // Update counts
    updateCompanyCounts();
}

function filterCompanies(sector, btn) {
    currentCompanyFilter = sector;

    // Update active tab
    document.querySelectorAll('.company-filter-tab').forEach(tab => {
        tab.classList.toggle('active', tab === btn);
    });

    // Re-render companies
    renderCompanies(sector);
}

function viewCompanyJobs(companyName) {
    // Filter jobs by company and navigate to jobs page
    activeFilters.keyword = companyName;
    document.getElementById('searchKeyword').value = companyName;
    showPage('jobs');
    applyFilters();
}

function updateCompanyCounts() {
    const counts = {
        all: companiesData.length,
        govt: companiesData.filter(c => c.sector === 'govt').length,
        'semi-govt': companiesData.filter(c => c.sector === 'semi-govt').length,
        private: companiesData.filter(c => c.sector === 'private').length
    };

    if(document.getElementById('countAll')) document.getElementById('countAll').textContent = counts.all;
    if(document.getElementById('countGovt')) document.getElementById('countGovt').textContent = counts.govt;
    if(document.getElementById('countSemiGovt')) document.getElementById('countSemiGovt').textContent = counts['semi-govt'];
    if(document.getElementById('countPrivate')) document.getElementById('countPrivate').textContent = counts.private;
}

function renderApplications() {
    const apps = JSON.parse(sessionStorage.getItem('applications') || '[]');
    const container = document.getElementById('applicationsList');
    if (!container) return;

    if (!apps.length) {
        container.innerHTML = `<div class="empty-state"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg><h3>${translations.noApps[currentLang].title}</h3><p>${translations.noApps[currentLang].desc}</p></div>`;
        return;
    }

    container.innerHTML = apps.map(a => `
        <div class="application-card">
            <div class="company-logo private" style="width:50px;height:50px;">${(a.company || '').slice(0, 4)}</div>
            <div style="flex:1">
                <h3 style="font-weight:600;margin-bottom:4px;">${a.jobTitle || a.job}</h3>
                <p style="color:var(--neutral-500);font-size:0.9rem;">${a.company}</p>
                <p style="color:var(--neutral-400);font-size:0.8rem;">${new Date(a.appliedAt || a.date).toLocaleDateString(currentLang === 'ar' ? 'ar-SA' : 'en-US')}</p>
            </div>
            <span class="application-status ${a.status}">${translations.statusLabels[currentLang][a.status]}</span>
        </div>
    `).join('');
}

function renderProfile() {
    const apps = JSON.parse(sessionStorage.getItem('applications') || '[]');
    const profile = JSON.parse(sessionStorage.getItem('profile') || '{}');
    const name = profile.name || (currentLang === 'ar' ? 'مستخدم جديد' : 'New User');
    const email = profile.email || 'user@example.com';
    const initial = name.charAt(0);

    document.getElementById('profileCard').innerHTML = `
        <div class="profile-avatar">${initial}</div>
        <h2 class="profile-name">${name}</h2>
        <p class="profile-email">${email}</p>
        <div class="profile-stats">
            <div><div class="profile-stat-value">${toArabicNum(savedJobs.length)}</div><div class="profile-stat-label">${translations.savedJobs[currentLang]}</div></div>
            <div><div class="profile-stat-value">${toArabicNum(apps.length)}</div><div class="profile-stat-label">${translations.applications[currentLang]}</div></div>
            <div><div class="profile-stat-value">${toArabicNum(savedJobs.length * 12 + apps.length * 8)}</div><div class="profile-stat-label">${translations.profileViews[currentLang]}</div></div>
        </div>
        <button class="btn btn-primary" style="width:100%;">${currentLang==='ar'?'تعديل الملف الشخصي':'Edit Profile'}</button>
    `;
}

function setView(view, btn) {
    document.querySelectorAll('.view-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('jobsGrid').classList.toggle('list-view', view==='list');
}

function toggleFilters() { document.getElementById('filtersSidebar').classList.toggle('open'); document.getElementById('filterBackdrop').classList.toggle('open'); document.body.style.overflow = document.getElementById('filtersSidebar').classList.contains('open') ? 'hidden' : ''; }

function toggleMobileMenu() {
    const nav = document.querySelector('.nav');
    const overlay = document.getElementById('menuOverlay');
    const isOpen = nav.classList.toggle('open');
    if(overlay) overlay.style.display = isOpen ? 'block' : 'none';
    document.body.style.overflow = isOpen ? 'hidden' : '';
}

function closeMobileMenu() {
    document.querySelector('.nav').classList.remove('open');
    const overlay = document.getElementById('menuOverlay');
    if(overlay) overlay.style.display = 'none';
    document.body.style.overflow = '';
}

// Close menu when clicking nav links
document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
});
    </script>
</body>
</html>